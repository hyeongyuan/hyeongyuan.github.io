<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hyeongyuan.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="DevieW">
<meta property="og:url" content="https://hyeongyuan.github.io/index.html">
<meta property="og:site_name" content="DevieW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Goofy">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hyeongyuan.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>DevieW</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">DevieW</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/hyeongyuan" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/07/23/go-concurrency-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/23/go-concurrency-pattern/" class="post-title-link" itemprop="url">Go의 동시성 패턴</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-07-23 19:30:00 / Modified: 16:43:46" itemprop="dateCreated datePublished" datetime="2020-07-23T19:30:00+09:00">2020-07-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/07/23/go-concurrency-pattern/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/07/23/go-concurrency-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="제한"><a href="#제한" class="headerlink" title="제한"></a>제한</h1><p>동시성 코드를 작성할 때, 안전한 작동을 위한 몇 가지 옵션이 있다.</p>
<ul>
<li>메모리 공유를 위한 동기화 기본 요소(예: sync.Mutex)</li>
<li>통신을 위한 동기화(예: 채널)</li>
</ul>
<p>(위 두 가지 옵션은 앞 장에서 이미 다루었습니다.)</p>
<ul>
<li>변경 불가능한 데이터</li>
<li>제한에 의해 보호되는 데이터</li>
</ul>
<p>(이번 장에서는 나머지 두 가지 옵션을 살펴보겠습니다.)</p>
<p>변경 불가능한 데이터는 암시적으로 동시에 실행해도 안전하기 때문에 이상적이다. 동시에 실행되는 각 프로세스는 동일한 데이터에서 동작할 수 있지만 이를 수정할 수는 없다.</p>
<ul>
<li>개발자의 인지 부하 감소</li>
<li>임계 영역의 크기 감소</li>
</ul>
<blockquote>
<p><strong>임계 구역</strong>(critical section) 또는 <strong>공유변수 영역</strong>은 병렬컴퓨팅에서 둘 이상의 스레드가 동시에 접근해서는 안되는 공유 자원(자료 구조 또는 장치)을 접근하는 코드의 일부를 말한다.</p>
<p>출처: <a href="https://ko.wikipedia.org/wiki/임계_구역" target="_blank" rel="noopener">https://ko.wikipedia.org/wiki/임계_구역</a></p>
</blockquote>
<p>제한은 애드 혹(ad hoc)과 어휘적(lexical)이라는 두 가지 방식으로 가능합니다.</p>
<blockquote>
<p><strong>애드혹</strong>(라틴어: Ad hoc)은 “이것을 위해” 즉 “특별한 목적을 위해서”라는 뜻의 라틴어로, 일반적으로 다음을 나타낸다.</p>
<ol>
<li>특정한 문제나 일을 위해 만들어진 관습적인 해결책</li>
<li>일반화할 수 없는 해결책</li>
<li>어떤 다른 목적에서 적응시킬 수 없는 해결책</li>
</ol>
<p>출처: <a href="https://ko.wikipedia.org/wiki/애드혹" target="_blank" rel="noopener">https://ko.wikipedia.org/wiki/애드혹</a></p>
</blockquote>
<p>애드 혹 제한이란, 언어의 커뮤니티나 근무하는 그룹 또는 작업하는 코드베이스에서 설정된 관례에 의해 제한이 이루어진 경우입니다.</p>
<p>(다음의 예제를 살펴봅시다.)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">loopData := <span class="function"><span class="keyword">func</span><span class="params">(handleData <span class="keyword">chan</span>&lt;- <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="built_in">close</span>(handleData)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> data &#123;</span><br><span class="line">		handleData &lt;- data[i]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handleData := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"><span class="keyword">go</span> loopData(handleData)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num := <span class="keyword">range</span> handleData &#123;</span><br><span class="line">	fmt.Println(num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(정수 데이터 슬라이스는 handleData 채널을 통해 loopData 함수와 루프 모두에서 사용할 수 있지만, 관례적으로 loopData 함수에서만 접근합니다. 그러나 많은 사람이 코드를 건드리는 경우도 있고, 실수가 일어나 제한이 깨지면서 문제가 발생할 수 있습니다.)</p>
<p>어휘적 제한은 올바른 데이터만 노출하기 위한 어휘 범위 및 이를 사용하는 여러 동시 프로세스를 위한 동시성 기본 요소와 관련이 있다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">chanOwner := <span class="function"><span class="keyword">func</span><span class="params">()</span> &lt;-<span class="title">chan</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  results := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">5</span>)	<span class="comment">// --------------------- (1)</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(results)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">			results &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> results</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">consumer := <span class="function"><span class="keyword">func</span><span class="params">(results &lt;-<span class="keyword">chan</span> <span class="keyword">int</span>)</span></span> &#123;		<span class="comment">// ----------- (2)</span></span><br><span class="line">	<span class="keyword">for</span> result := <span class="keyword">range</span> results &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"Received: %d\n"</span>, result)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Done receiving!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">results := chanOwner()	<span class="comment">// ----------------------------- (3)</span></span><br><span class="line">consumer(results)</span><br></pre></td></tr></table></figure>



<p>(1) chanOwner의 어휘 범위 내부에서 채널을 인스턴스화한다. 이는 results 채널의 쓰기 측면의 범위를 그 아래에 정의된 클로저로 제한한다.</p>
<p>(2) 채널의 읽기 측면을 받아 consumer 내부로 전달해 consumer가 읽기 외에는 다른 작업을 하지 못하도록 할 수 있다.</p>
<p>(3) int 채널의 읽기 전용 복사본을 받는다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">printData := <span class="function"><span class="keyword">func</span><span class="params">(wg *sync.WaitGroup, data []<span class="keyword">byte</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> buff bytes.Buffer</span><br><span class="line">	<span class="keyword">for</span> _, b := <span class="keyword">range</span> data &#123;</span><br><span class="line">		fmt.Fprintf(&amp;buff, <span class="string">"%c"</span>, b)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(buff.String())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">wg.Add(<span class="number">2</span>)</span><br><span class="line">data := []<span class="keyword">byte</span>(<span class="string">"golang"</span>)</span><br><span class="line"><span class="keyword">go</span> printData(&amp;wg, data[:<span class="number">3</span>])	<span class="comment">// -------------------- (1)</span></span><br><span class="line"><span class="keyword">go</span> printData(&amp;wg, data[<span class="number">3</span>:])	<span class="comment">// -------------------- (2)</span></span><br><span class="line">wg.Wait()</span><br></pre></td></tr></table></figure>



<h2 id="동기화를-사용할-수-있다면-왜-제한을-추구해야-하는가"><a href="#동기화를-사용할-수-있다면-왜-제한을-추구해야-하는가" class="headerlink" title="동기화를 사용할 수 있다면 왜 제한을 추구해야 하는가?"></a>동기화를 사용할 수 있다면 왜 제한을 추구해야 하는가?</h2><p>그 이유는 성능을 향상시키고 개발자의 인지 부하를 줄이기 위해서다.</p>
<p>(동기화는 비용이 들며, 이를 피할 수 있으면 임계 영역이 없기 때문에 동기화 비용을 지불할 필요가 없습니다. 또한 동기화로 인해 발생 가능한 모든 문제도 막을 수 있습니다.)</p>
<p>또한 어휘적 제한을 사용하는 동시성 코드는 이를 사용하지 않는 동시성 코드보다 더 이해하기 쉽다는 이점이 있다.</p>
<p>그럼에도 제한을 설정하는 것은 어려울 수 있으며, 때로는 멋진 Go 동시성 기본 요소로 돌아가야 한다.</p>
<h1 id="for-select-루프"><a href="#for-select-루프" class="headerlink" title="for-select 루프"></a>for-select 루프</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;	<span class="comment">// 무한 반복 또는 특정 범위에 대한 루프</span></span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="comment">// 채널에 대한 작업</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>for-select</code> 루프가 나타날 수 있는 몇 가지 시나리오를 살펴보자.</p>
<h2 id="채널에서-반복-변수-보내기"><a href="#채널에서-반복-변수-보내기" class="headerlink" title="채널에서 반복 변수 보내기"></a>채널에서 반복 변수 보내기</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, s := <span class="keyword">range</span> []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125; &#123;</span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> &lt;-done:</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">case</span> stringStream &lt;- s:</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="멈추기를-기다리면서-무한히-대기"><a href="#멈추기를-기다리면서-무한히-대기" class="headerlink" title="멈추기를 기다리면서 무한히 대기"></a>멈추기를 기다리면서 무한히 대기</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 첫 번째</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> &lt;-done:</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">  &#125;	</span><br><span class="line">  <span class="comment">// 선점 불가능한(non-preemptable) 작업 수행</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 두 번째</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">  <span class="keyword">select</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> &lt;-done:</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">// 선점 불가능한 작업 수행</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(select 구문을 들어갔을 때 done 채널이 닫히지 않았다면, default 구문을 대신 실행할 것입니다.)</p>
<h1 id="고루틴-누수-방지"><a href="#고루틴-누수-방지" class="headerlink" title="고루틴 누수 방지"></a>고루틴 누수 방지</h1><p>런타임은 고루틴을 임의의 수의 운영체제 스레드로 다중화하며, 많은 경우에 해당 추상화 수준에 대한 염려할 필요가 없도록 처리합니다. 그러나 고루틴들은 자원을 필요로 하며, 런타임에 의해 가비시 컬렉션되지 않으므로, 그들이 남기는 메모리 흔적이 얼마나 작든 그 흔적들을 남겨두고 싶지 않습니다.</p>
<p>고루틴이 종료되는 데는 몇 가지 경로가 있습니다.</p>
<ul>
<li>작업이 완료됐을 때</li>
<li>복구할 수 없는 에러로 인해 더 이상 작업을 계속할 수 없을 때</li>
<li>작업을 중단하라는 요청을 받았을 때</li>
</ul>
<p>처음 두 경로는 사용자의 알고리즘이므로 별다른 노력 없이 도달할 수 있습니다. 그러나 작업 취소는 어떻게 해야 할까요?</p>
<p>고루틴은 일련의 조직화된 방식으로 다른 몇몇 고루틴들과 협력할 가능성이 큽니다. 자식 고루틴이 계속 실행돼야 하는지 여부는 많은 다른 고루틴들의 상태에 대한 지식에 근거해 정할 수 있습니다. 이러한 전체 문맥에 대한 지식을 가진 부모 고루틴(많은 경우 main 고루틴)은 그 자식 고루틴에게 종료하라고 말할 수 있어야 합니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">doWork := <span class="function"><span class="keyword">func</span><span class="params">(strings &lt;-<span class="keyword">chan</span> <span class="keyword">string</span>)</span> &lt;-<span class="title">chan</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">	completed := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"doWork exited."</span>)</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(completed)</span><br><span class="line">		<span class="keyword">for</span> s := <span class="keyword">range</span> strings &#123;</span><br><span class="line">			<span class="comment">// 원하는 작업을 수행</span></span><br><span class="line">			fmt.Println(s)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> completed</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doWork(<span class="literal">nil</span>)</span><br><span class="line"><span class="comment">// 여기서 추가적인 작업이 이루어질 수 있다.</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"Done."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// completed := doWork(nil)</span></span><br><span class="line"><span class="comment">// &lt;- completed</span></span><br><span class="line"><span class="comment">// [ 출력 ]</span></span><br><span class="line"><span class="comment">// fatal error: all goroutines are asleep - deadlock!</span></span><br></pre></td></tr></table></figure>

<p>(nil 채널을 doWork로 전달하여 strings 채널은 실제로 어떠한 문자열도 쓰지 않으며, doWork를 포함하는 고루틴은 이 프로세스가 지속되는 동안 메모리에 남아 있게 됩니다. 이 예제에서는 프로세스의 수명이 매우 짧지만, 실제 프로그램에선 고루틴을 계속 돌려 메모리 사용량에 영향을 미칠 것입니다.)</p>
<p>심지어 doWork 및 main 고루틴 내에서 고루틴을 조인(join)하면 데드락 상태가 발생합니다.</p>
<p>이를 성공적으로 완화하는 방법은, 부모 고루틴이 자식 고루틴에게 취소(cancellation) 신호를 보낼 수 있도록 부모와 자식 고루틴들 사이에 신호를 설정하는 것입니다. 일반적으로 이 신호는 <code>done</code>이라는 읽기 전용 채널입니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">doWork := <span class="function"><span class="keyword">func</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	done &lt;-<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;,</span></span></span><br><span class="line"><span class="function"><span class="params">	strings &lt;-<span class="keyword">chan</span> <span class="keyword">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> &lt;-<span class="title">chan</span> <span class="title">interface</span></span>&#123;&#125; &#123;	<span class="comment">// -------------------- (1)</span></span><br><span class="line">	terminated := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"doWork exited."</span>)</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(terminated)</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> s := &lt;-strings:</span><br><span class="line">				<span class="comment">// 원하는 작업을 수행</span></span><br><span class="line">				fmt.Println(s)</span><br><span class="line">			<span class="keyword">case</span> &lt;-done:	<span class="comment">// ------------------------ (2)</span></span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> terminated</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">terminated := doWork(done, <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;	<span class="comment">// -------------------------------- (3)</span></span><br><span class="line">	<span class="comment">// 1초 후에 작업을 취소한다.</span></span><br><span class="line">	time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	fmt.Println(<span class="string">"Canceling doWork goroutine..."</span>)</span><br><span class="line">	<span class="built_in">close</span>(done)</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">&lt;-terminated	<span class="comment">// ------------------------------ (4)</span></span><br><span class="line">fmt.Println(<span class="string">"Done."</span>)</span><br></pre></td></tr></table></figure>

<p>(1) 일반적으로 취소 신호를 위한 done 채널은 첫 번째 매개 변수로 전달한다.</p>
<p>(2) for-select 패턴을 사용하고 있는데 case 구문 중 하나는 done 채널이 신호를 받았는지 여부를 확인하는 것이다.</p>
<p>(3) 1초 이상 지나면 doWork에 생성된 고루틴을 취소할 또 다른 고루틴을 생성한다.</p>
<p>(4) doWork에서 생성된 고루틴과 main 고루틴을 조인한다.</p>
<p>(위 예제와는 달리 strings 채널에 nil을 전달했음에도 불구하고, 고루틴이 성공적으로 종료됐습니다. 또한 두 개의 고루틴을 조인하지만 데드락 상태가 발생하지 않습니다. <strong>그 이유는 두 개의 고루틴을 조인하기 전에, 세 번째 고루틴을 생성해 1초 후에 doWork 내에서 고루틴을 취소하기 때문입니다.</strong>)</p>
<p>채널에 값을 쓰려는 시도를 차단하는 고루틴의 경우</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">newRandStream := <span class="function"><span class="keyword">func</span><span class="params">()</span> &lt;-<span class="title">chan</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	randStream := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"newRandStream closure exited."</span>)</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(randStream)</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			randStream &lt;- rand.Int()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> randStream</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">randStream := newRandStream()</span><br><span class="line">fmt.Println(<span class="string">"3 random int:"</span>)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++ &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%d: %d\n"</span>, i, &lt;-randStream)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>출력 결과부터 지연된(defer) fmt.Println 구문이 절대 실행되지 않는다는 것을 알 수 있습니다.</p>
<p>루프의 세 번째 반복 이후에, 고루틴 블록은 더 이상 읽을 수 없는 채널에 다음번 랜덤 정수를 보내려고 시도합니다. 예제에서는 생산자에게 멈춰도 된다고 말할 방법이 없습니다. 해결책은 생산자 고루틴에게 종료를 알리는 채널을 제공하는 것입니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">newRandStream := <span class="function"><span class="keyword">func</span><span class="params">(done &lt;-<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span> &lt;-<span class="title">chan</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	randStream := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">"newRandStream closure exited."</span>)</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(randStream)</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> randStream &lt;- rand.Int():</span><br><span class="line">			<span class="keyword">case</span> &lt;-done:</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> randStream</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">randStream := newRandStream(done)</span><br><span class="line">fmt.Println(<span class="string">"3 random int:"</span>)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++ &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%d: %d\n"</span>, i, &lt;-randStream)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">close</span>(done)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 진행 중인 작업을 시뮬레이션한다.</span></span><br><span class="line">time.Sleep(<span class="number">1</span> * time.Second)</span><br></pre></td></tr></table></figure>


<h2 id="“다른-고루틴을-생성한-책임이-있는-고루틴은-해당-고루틴을-중지시킬-책임도-진다-”"><a href="#“다른-고루틴을-생성한-책임이-있는-고루틴은-해당-고루틴을-중지시킬-책임도-진다-”" class="headerlink" title="“다른 고루틴을 생성한 책임이 있는 고루틴은 해당 고루틴을 중지시킬 책임도 진다.”"></a>“다른 고루틴을 생성한 책임이 있는 고루틴은 해당 고루틴을 중지시킬 책임도 진다.”</h2><p>고루틴의 중지를 보장하는 방법은 고루틴의 타입과 목적에 따라 다를 수 있지만, 모두 done 채널을 전달하는 것을 바탕으로 구축됩니다.</p>
<h1 id="or-채널"><a href="#or-채널" class="headerlink" title="or 채널"></a>or 채널</h1><p>때로는 하나 이상의 done 채널을 하나의 done 채널로 걸합해, 그 구성 요소 중 하나의 채널이 닫힐 때 결합된 채널이 닫히도록 해야 할 경우도 있을 것입니다. 이 경우에는 이러한 결합을 수행하는 select문을 작성하는 것이 좋습니다.</p>
<p>재귀 및 고루틴들을 이용해 복합 done 채널을 만듭니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> or <span class="function"><span class="keyword">func</span><span class="params">(channels ...&lt;-<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span> &lt;-<span class="title">chan</span> <span class="title">interface</span></span>&#123;&#125;</span><br><span class="line">or = <span class="function"><span class="keyword">func</span><span class="params">(channels ...&lt;-<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span> &lt;-<span class="title">chan</span> <span class="title">interface</span></span>&#123;&#125; &#123;	<span class="comment">// -- (1)</span></span><br><span class="line">	<span class="keyword">switch</span> <span class="built_in">len</span>(channels) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:	<span class="comment">// -------------------------------------------------------- (2)</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:	<span class="comment">// -------------------------------------------------------- (3)</span></span><br><span class="line">		<span class="keyword">return</span> channels[<span class="number">0</span>]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	orDone := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;	<span class="comment">// ---------------------------------------------------- (4)</span></span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(orDone)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> <span class="built_in">len</span>(channels) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:	<span class="comment">// ------------------------------------------------------ (5)</span></span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> &lt;-channels[<span class="number">0</span>]:</span><br><span class="line">			<span class="keyword">case</span> &lt;-channels[<span class="number">1</span>]:</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">default</span>:	<span class="comment">// ---------------------------------------------------- (6)</span></span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> &lt;-channels[<span class="number">0</span>]:</span><br><span class="line">			<span class="keyword">case</span> &lt;-channels[<span class="number">1</span>]:</span><br><span class="line">			<span class="keyword">case</span> &lt;-channels[<span class="number">2</span>]:</span><br><span class="line">			<span class="keyword">case</span> &lt;-or(<span class="built_in">append</span>(channels[<span class="number">3</span>:], orDone)...):	<span class="comment">// ---------------- (6)</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> orDone</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(1) 가변(variadic) 채널 슬라이스를 받아 하나의 채널을 반환하는 or 함수가 있습니다.</p>
<p>(2) 이 함수는 재귀 함수이므로 종료 기준을 설정해야 합니다. 그 중 첫 번째 종료 기준은 가번 슬라이스가 비어 있으면 단순히 nil 채널을 반환한다는 것입니다.</p>
<p>(3) 두 번째 기준은 가변 슬라이스에 하나의 요소만 있으면 해당 요소를 반환하는 것입니다.</p>
<p>(4) 재귀가 발생하는 부분으로 채널들에서 차단 없이 메세지를 기다릴 수 있도록 고루틴을 생성합니다.</p>
<p>(5) 재귀 방식을 사용하고 있기 때문에, or에 대한 모든 재귀 호출은 적어도 두 개의 채널을 가지고 있습니다.</p>
<p>(6) </p>
<p>이는 여러 개의 채널을 한 개의 채널로 결합해, 여러 채널 중에 하나라도 닫히거나 채널에 데이터가 쓰여지면 모든 채널이 닫히도록 할 수 있는 매우 간결한(?) 함수입니다. 다음은 설정된 지속 시간 후에 닫히는 여러 채널들을 받아서, 이들을 or 함수를 사용해 단일 채널로 결합하고 이를 닫는 간단한 예제입니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">sig := <span class="function"><span class="keyword">func</span><span class="params">(after time.Duration)</span> &lt;-<span class="title">chan</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(c)</span><br><span class="line">		time.Sleep(after)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line">start := time.Now()</span><br><span class="line">&lt;-or(</span><br><span class="line">	sig(<span class="number">2</span>*time.Hour),</span><br><span class="line">	sig(<span class="number">5</span>*time.Minute),</span><br><span class="line">	sig(<span class="number">1</span>*time.Second),</span><br><span class="line">	sig(<span class="number">1</span>*time.Hour),</span><br><span class="line">	sig(<span class="number">1</span>*time.Minute),</span><br><span class="line">)</span><br><span class="line">fmt.Printf(<span class="string">"done after %v"</span>, time.Since(start))</span><br><span class="line"></span><br><span class="line"><span class="comment">// [ 출력 ]</span></span><br><span class="line"><span class="comment">// done after 1.000375051s</span></span><br></pre></td></tr></table></figure>

<p>호출이 닫히기까지 서로 다른 시간이 소요되는 여러 개의 채널을 배치함에도 불구하고, 1초 후에 닫히는 채널로 인해 or 호출에 의해 생성된 전체 채널이 닫힌다는 점에 주목해야 합니다.</p>
<p>추가적인 고루틴들의 비용인 f(x) = [x/2]의 비용으로 이 간결함을 얻을 수 있습니다.(여기서 x는 고루틴의 수입니다.) Go의 강점 중 하나는 고루틴을 신속하게 생성하고 스케줄링 및 실행할 수 있다는 것입니다.</p>
<p>이 패턴은 시스템의 모듈들이 교차하는 지점에서 사용할 때 유용합니다. 이러한 교차점에서는 콜 스텍을 통해 고루틴 트리를 취소할 수 있는 여러 개의 조건이 존재하곤 합니다. or 함수를 사용해 간단히 이 조건들을 결합하고 스택 아래쪽으로 전달할 수 있습니다.</p>
<h1 id="에러-처리"><a href="#에러-처리" class="headerlink" title="에러 처리"></a>에러 처리</h1><p>동시성 프로그램에서 에러 처리를 올바르게 진행하는 일은 어려울 수 도 있습니다. Go는 널리 알려진 에러의 예외  모델을 피하면서 에러 처리가 중요하다는 사실을 알렸습니다. 동시에 실행되는 여러 개의 프로세스로 작업할 때 어떤 식으로 에러를 처리해야 하는지 살펴보겠습니다.</p>
<p>에러 처리에 관한 생각을 할 때 가장 근본적인 질문은 <strong>“에러 처리의 책임자는 누구인가?”</strong>입니다. 어떤 시점에서는 스택에 따라 에러를 전달하는 것을 멈추고 실제로 뭔가를 수행해야 합니다. 누가 이를 책임지겠습니까?</p>
<p>동시에 실행되는 프로세스들은 부모 또는 형제 프로세스와 독립적으로 작동하기 때문에 에러와 관련해 제대로 된 일이 무엇인지 추론하기 어려울 수 있습니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">checkStatus := <span class="function"><span class="keyword">func</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	done &lt;-<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;,</span></span></span><br><span class="line"><span class="function"><span class="params">	urls ...<span class="keyword">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> &lt;-<span class="title">chan</span> *<span class="title">http</span>.<span class="title">Response</span></span> &#123;</span><br><span class="line">	responses := <span class="built_in">make</span>(<span class="keyword">chan</span> *http.Response)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(responses)</span><br><span class="line">		<span class="keyword">for</span> _, url := <span class="keyword">range</span> urls &#123;</span><br><span class="line">			resp, err := http.Get(url)</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)	<span class="comment">// -------------------------- (1)</span></span><br><span class="line">				<span class="keyword">continue</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> &lt;-done:</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			<span class="keyword">case</span> responses &lt;- resp:</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> responses</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(done)</span><br><span class="line"></span><br><span class="line">urls := []<span class="keyword">string</span>&#123;<span class="string">"https://google.com"</span>, <span class="string">"https://badhost"</span>&#125;</span><br><span class="line"><span class="keyword">for</span> response := <span class="keyword">range</span> checkStatus(done, urls...) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"Response: %v\n"</span>, response.Status)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(1) 고루틴은 에러를 출력할 뿐 다른 행동을 취할 선택지가 없습니다. 에러를 출력하고 누군가 주목해주기를 바랄 뿐입니다.</p>
<p>고루틴들을 이러한 어색한 상황에 빠뜨리지 않아야 합니다. <strong>관심 사항을 분리할 것을 권합니다.</strong> 일반적으로 동시에 실행되는 프로세스들은 프로그램의 상태에 대해 완전한 정보를 가지고 있는 프로그램의 다른 부분으로 에러를 보내야 하며, 그래야 보다 많은 정보를 바탕으로 무엇을 해야 할지 결정할 수 있습니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Result <span class="keyword">struct</span> &#123;	<span class="comment">// ------------------------------------------- (1)</span></span><br><span class="line">	Error    error</span><br><span class="line">	Response *http.Response</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkStatus := <span class="function"><span class="keyword">func</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	done &lt;-<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;,</span></span></span><br><span class="line"><span class="function"><span class="params">	urls ...<span class="keyword">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> &lt;-<span class="title">chan</span> <span class="title">Result</span></span> &#123;	<span class="comment">// ----------------------------------------------- (2)</span></span><br><span class="line">	results := <span class="built_in">make</span>(<span class="keyword">chan</span> Result)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> <span class="built_in">close</span>(results)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> _, url := <span class="keyword">range</span> urls &#123;</span><br><span class="line">			<span class="keyword">var</span> result Result</span><br><span class="line">			resp, err := http.Get(url)</span><br><span class="line">			result = Result&#123;Error: err, Response: resp&#125;	<span class="comment">// --------------- (3)</span></span><br><span class="line">			<span class="keyword">select</span> &#123;</span><br><span class="line">			<span class="keyword">case</span> &lt;-done:</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			<span class="keyword">case</span> results &lt;- result:	<span class="comment">// ----------------------------------- (4)</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> results</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(done)</span><br><span class="line"></span><br><span class="line">urls := []<span class="keyword">string</span>&#123;<span class="string">"https://google.com"</span>, <span class="string">"https://badhost"</span>&#125;</span><br><span class="line"><span class="keyword">for</span> result := <span class="keyword">range</span> checkStatus(done, urls...) &#123;</span><br><span class="line">	<span class="keyword">if</span> result.Error != <span class="literal">nil</span> &#123;	<span class="comment">// -------------------------------------- (5)</span></span><br><span class="line">		fmt.Printf(<span class="string">"error: %v\n"</span>, result.Error)</span><br><span class="line">		<span class="keyword">continue</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"Response: %v\n"</span>, result.Response.Status)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [출력]</span></span><br><span class="line"><span class="comment">// Response: 200 OK</span></span><br><span class="line"><span class="comment">// error: Get "https://badhost": dial tcp: lookup badhost: no such host</span></span><br></pre></td></tr></table></figure>

<p>(1) *http.Response와 고루틴 내의 루프 반복 시에 발생할 수 있는 error 모두를 포함하는 타입을 생성합니다.</p>
<p>(2) 루프 반복의 결과를 읽어올 수 있는 채널을 반환합니다.</p>
<p>(3) Error 및 Response 필드가 설정된 인스턴스를 만듭니다.</p>
<p>(4) 채널에 Resut를 씁니다.</p>
<p>(5) 고루틴 내에서 발생한 에러를 더 큰 프로그램의 전체 컨텍스트 내에서 처리할 수 있습니다.</p>
<p>여기서서는 잠재적인 출력을 잠재적인 에러와 연결한 방법이 핵심입니다. 이는 checkStatus 고루틴에서 생성 가능한 결과의 전체 집합을 나타내며, 에러가 발생했을 때 main 고루틴이 수행할 작업을 결정할 수 있게 해줍니다. 넓은 의미에서 에러 처리의 문제를 생산자 고루틴과 성공적으로 분리했다는 것입니다.</p>
<p>단순한 에러를 출력하는 것 말고도, 다른 작업을 할 수도 있습니다. 세 가지 이상의 에러가 발생하면 상태를 확인하는 것을 멈추게 해봅시다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(done)</span><br><span class="line"></span><br><span class="line">errCount := <span class="number">0</span></span><br><span class="line">urls := []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"https://google.com"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>&#125;</span><br><span class="line"><span class="keyword">for</span> result := <span class="keyword">range</span> checkStatus(done, urls...) &#123;</span><br><span class="line">	<span class="keyword">if</span> result.Error != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"error: %v\n"</span>, result.Error)</span><br><span class="line">		errCount++</span><br><span class="line">		<span class="keyword">if</span> errCount &gt;= <span class="number">3</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"Too many errors, breaking!"</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">continue</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"Response: %v\n"</span>, result.Response.Status)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [출력]</span></span><br><span class="line"><span class="comment">// error: Get "a": unsupported protocol scheme ""</span></span><br><span class="line"><span class="comment">// Response: 200 OK</span></span><br><span class="line"><span class="comment">// error: Get "b": unsupported protocol scheme ""</span></span><br><span class="line"><span class="comment">// error: Get "c": unsupported protocol scheme ""</span></span><br><span class="line"><span class="comment">// Too many errors, breaking!</span></span><br></pre></td></tr></table></figure>

<p>여기서 주목할 점은 고루틴들에서 반환될 값을 구성할 때 에러가 <strong>일급 객체</strong>로 간주돼야 한다는 것입니다. 고루틴이 에러를 발생시킬 수 있는 경우, 이러한 에러는 결과 타입과 밀접하게 결합돼야 하며, 일반적인 동기 함수처럼 동일한 통신 회선을 통해 전달돼야 합니다.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/06/17/typescript-aync-await/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/17/typescript-aync-await/" class="post-title-link" itemprop="url">타입스크립트 스터디 8주차</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-06-17 18:30:00 / Modified: 18:49:35" itemprop="dateCreated datePublished" datetime="2020-06-17T18:30:00+09:00">2020-06-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/06/17/typescript-aync-await/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/17/typescript-aync-await/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="12-1-프로미스를-이용한-제어-흐름-개선"><a href="#12-1-프로미스를-이용한-제어-흐름-개선" class="headerlink" title="12.1. 프로미스를 이용한 제어 흐름 개선"></a>12.1. 프로미스를 이용한 제어 흐름 개선</h1><hr>
<p>HTTP 요청은 비동기이므로 콜백 헬(callback hell)과 같은 중첩 스코프를 만들어 냅니다. 타입스크립트는 ES6에서 제안된 프로미스를 이용해 콜백 헬이 되지 않도록 제어 흐름을 개선할 수 있습니다.</p>
<h2 id="12-1-1-비동기-호출-시-중첩-스코프의-문제"><a href="#12-1-1-비동기-호출-시-중첩-스코프의-문제" class="headerlink" title="12.1.1. 비동기 호출 시 중첩 스코프의 문제"></a>12.1.1. 비동기 호출 시 중첩 스코프의 문제</h2><p>자바스크립트는 비동기 요청 후 응답 결과를 콜백 함수로 처리합니다. 이렇게 콜백 함수로 처리하는 상황은 대체로 응답 시점을 예측할 수 없을 때입니다. 비동기 요청 후 응답 결과는 콜백 함수의 매개변수를 통해 전달됩니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="keyword">get</span>('ajax/test.html', function (data) &#123;</span><br><span class="line">  <span class="comment">// 응답 결과에 따라 어떤 로직을 수행함</span></span><br><span class="line">  <span class="keyword">if</span> (data.grade == <span class="string">'admin'</span>) &#123;</span><br><span class="line">    <span class="comment">// 로직 처리</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>위 jQuery 코드에서 콜백 함수의 매개변수에는 HTTP 요청의 응답 데이터가 전달되며 응답 결과에 따라 로직을 처리합니다. 콜백 함수를 처리할 때 사용하는 제어문들은 스코프를 더욱 깊게 만드는 요인이 됩니다. 위 코드는 스코프의 깊이가 2 정도로 가독성이 나쁘지 않지만, 스코프 깊이가 3 이상이 되면 가독성이 서서히 나빠지기 시작합니다. 이러한 상황은 흔히 콜백 헬(callback hell)로 알려져 있습니다.</p>
<p>콜백 헬이 나타나면 가독성이 떨어져 유지보수를 어렵게 합니다. 콜백 헬을 피하려면 스코프가 중첩되지 않도록 제어 구조를 개선해야 합니다. 이어서 소개할 프로미스가 콜백 헬의 대안이 됩니다.</p>
<h2 id="12-1-2-프로미스-소개와-동작-과정"><a href="#12-1-2-프로미스-소개와-동작-과정" class="headerlink" title="12.1.2. 프로미스 소개와 동작 과정"></a>12.1.2. 프로미스 소개와 동작 과정</h2><p>프로미스(promise)는 중첩 스코프 문제를 해결하기 위해 ES6에서 제한된 객체입니다. 프로미스는 스코프가 깊어지지 않도록 나열식 패턴 방식으로 입력 데이터를 처리할 수 있게 합니다.</p>
<p>프로미스는 다음과 같은 세 가지 상태가 존재합니다.</p>
<ul>
<li>대기(pending) 상태</li>
<li>충족(fulfilled) 상태</li>
<li>거부(rejected) 상태</li>
</ul>
<p>대기 상태는 프로미스가 실행되고 값이 결정되지 않은 상태를 말합니다. 프로미스가 완료되지 않았으므로 대기 상태로 불립니다. 충족 상태는 대기 상태가 끝난 뒤 값이 결졍된 상태이며 resolve 함수를 통해 값을 전달합니다. 마지막으로 거부 상태는 프로미스가 제대로 처리되지 않고 거부된 상태로 catch 메서드를 통해 예외를 처리해 주어야 합니다.</p>
<p>프로미스는 최초 실행 함수(executor)를 통해 실행됩니다. 실행 함수가 <strong>시작되고 마치기 전까지 대기 상태</strong>를 유지합니다. 프로미스는 익명 함수 형태(또는 화살표 함수)로 작성할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 처리할 프로미스 작업에 대한 로직을 추가함</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>프로미스가 정상적으로 수행됐다면 충족 상태가 되어 resolve 함수를 호출합니다. 반대로 실패했다면 거부 상태가 되어 reject 함수를 호출해 예외 처리를 진행합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (충족 상태) &#123;</span><br><span class="line">    resolve(result);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 거부 상태</span></span><br><span class="line">    reject(<span class="string">"거절 사유를 전달함."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>첫 번째 매개변수로 전달된 resolve 함수를 호출하면 <code>then</code> 메서드를 호출합니다. then 메서드는 결정된 값에 대해 후속 처리를 담당합니다. reject 함수에 거절된 사유를 전달하면 <code>catch</code> 메서드가 호출됩니다. catch 메서드는 전달된 이유를 표시해주고 예외 처리를 진행합니다.</p>
<h2 id="12-1-3-타입스크립트에서-프로미스-컴파일-방법"><a href="#12-1-3-타입스크립트에서-프로미스-컴파일-방법" class="headerlink" title="12.1.3. 타입스크립트에서 프로미스 컴파일 방법"></a>12.1.3. 타입스크립트에서 프로미스 컴파일 방법</h2><h3 id="명령어-옵션을-통한-프로미스-컴파일"><a href="#명령어-옵션을-통한-프로미스-컴파일" class="headerlink" title="명령어 옵션을 통한 프로미스 컴파일"></a>명령어 옵션을 통한 프로미스 컴파일</h3><p>프로미스는 비교적 최신 브라우저에서 지원합니다.</p>
<table>
<thead>
<tr>
<th>IE</th>
<th>Edege</th>
<th>파이어폭스</th>
<th>크롬</th>
<th>사파리</th>
<th>오페라</th>
</tr>
</thead>
<tbody><tr>
<td>지원 안 함</td>
<td>14 이상</td>
<td>52 이상</td>
<td>57 이상</td>
<td>10 이상</td>
<td>43 이상</td>
</tr>
</tbody></table>
<p>모바일 브라우저에서 프로미스의 지원 현황은 다음과 같습니다.</p>
<table>
<thead>
<tr>
<th>iOS 사파리</th>
<th>오페라 미니</th>
<th>안드로이드 브라우저</th>
<th>안드로이드용 크롬</th>
</tr>
</thead>
<tbody><tr>
<td>10.2 이상</td>
<td>지원 안 함</td>
<td>53 이상</td>
<td>56 이상</td>
</tr>
</tbody></table>
<p>구 브라우저와의 호환성을 고려해 ES5로 컴파일하되 프로미스만 사용할 수 있도록 컴파일하면 좋을 것 입니다. ‘ES5 + 프로미스’ 조합으로 컴파일하려면 다음처럼 <code>--lib</code> 옵션을 이용할 수 있습니다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tsc hello.ts --lib ES2015.Promise,dom,es5</span></span><br></pre></td></tr></table></figure>

<p>위 명령어를 실행하면 ES5와 프로미스를 함께 컴파일할 수 있습니다. lib 옵션을 사용하지 않고 프로미스 기능을 테스트하려면 target을 ES6로 맞춰서 컴파일해야 합니다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tsc promise-async.ts --target es6</span></span><br></pre></td></tr></table></figure>

<h3 id="tsconfig-json-설정을-통한-프로미스-컴파일"><a href="#tsconfig-json-설정을-통한-프로미스-컴파일" class="headerlink" title="tsconfig.json 설정을 통한 프로미스 컴파일"></a>tsconfig.json 설정을 통한 프로미스 컴파일</h3><p>프로미스를 허용하려면 tsconfig.json 파일의 target을 ES6(또는 ES2015)로 설정하면 됩니다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"es6"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ES5와 프로미스를 결합해 컴파일하려면 tsconfig.json 파일에 lib 속성을 추가해 줘야 합니다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"outDir"</span>: <span class="string">"./dist"</span>,</span><br><span class="line">    <span class="attr">"lib"</span>: [<span class="string">"es5"</span>, <span class="string">"dom"</span>, <span class="string">"es2015.promise"</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"exclude"</span>: [<span class="string">"node_modules"</span>, <span class="string">".vscode"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>lib 속성에 추가한 라이브러리 중 ES5는 표준 ES5에서 사용하는 Array, Boolean, Function, IArguments, Number, Object, RegExp, String과 같은 특징을 추가하기 위한 라이브러리입니다. 따라서 lib 속성에 ES5 라이브러리를 제외해 컴파일하면 타입을 찾을 수 없다는 컴파일 에러 메세지가 출력됩니다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tsc</span></span><br><span class="line">throw new TSError(formatDiagnostics(diagnosticList, cwd, ts, lineOffset))</span><br></pre></td></tr></table></figure>

<h2 id="12-1-4-프로미스를-사용한-중첩-스코프-개선"><a href="#12-1-4-프로미스를-사용한-중첩-스코프-개선" class="headerlink" title="12.1.4. 프로미스를 사용한 중첩 스코프 개선"></a>12.1.4. 프로미스를 사용한 중첩 스코프 개선</h2><h3 id="then-메서드를-이용해-중첩-코드-개선"><a href="#then-메서드를-이용해-중첩-코드-개선" class="headerlink" title="then 메서드를 이용해 중첩 코드 개선"></a>then 메서드를 이용해 중첩 코드 개선</h3><p>프로미스는 처리 흐름을 개선할 방법으로 <code>then</code> 메서드를 제공합니다. then 메서드는 중첩 스코프를 만들지 않아 가독성을 개선합니다. then 메서드는 하나의 처리 작업에 해당하며 작성 개수에 따라 체이닝 형태로 여러 개를 동시에 선언할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>then 메서드는 res 매개변수로 결정 값을 전달받습니다. Then 메서드를 체이닝 형태로 선언하고 then 메서드에서 발생한 예외 상황을 처리하려면 catch 메서드를 마지막에 선언해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> chainingPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  resolve(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value); <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value); <span class="comment">// 2</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="string">'Exception!'</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e); <span class="comment">// Exception!</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="12-1-5-프로미스의-비동기-호출-제어"><a href="#12-1-5-프로미스의-비동기-호출-제어" class="headerlink" title="12.1.5. 프로미스의 비동기 호출 제어"></a>12.1.5. 프로미스의 비동기 호출 제어</h2><p>프로미스는 비동기 응답의 흐름을 개선할 수 있습니다.</p>
<h3 id="호출-순서와-응답-순서가-일치하지-않는-문제"><a href="#호출-순서와-응답-순서가-일치하지-않는-문제" class="headerlink" title="호출 순서와 응답 순서가 일치하지 않는 문제"></a>호출 순서와 응답 순서가 일치하지 않는 문제</h3><p>임의 시간만큼의 지연이 있는 비동기 함수 여러 개를 동시에 호출하면 호출 순서와 응답 결과의 순서가 일치되지 않은 문제가 있습니다. 아래의 delay 함수는 호출할 때마다 지연시간이 달라지므로 콜백 함수가 실행되는 시점은 호출 순서와 일치하지 않게 됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ms: <span class="built_in">number</span> = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000</span>) + <span class="number">1</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(msg);</span><br><span class="line">  &#125;, ms);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  delay(<span class="string">'hello1'</span>);</span><br><span class="line">  delay(<span class="string">'hello2'</span>);</span><br><span class="line">  delay(<span class="string">'hello3'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncFunc();</span><br><span class="line"></span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// hello3</span></span><br><span class="line"><span class="comment">// hello2</span></span><br><span class="line"><span class="comment">// hello1</span></span><br></pre></td></tr></table></figure>

<p>delay 함수는 1~1000ms 범위의 임의 지연 후에 비동기 응답이 이뤄지므로 호출 순서와 응답 순서가 일치하지 않게 됩니다. delay 함수를 호출한 순서대로 콜백 함수가 실행되는 순서를 맞추려면 이어서 살펴볼 <code>Promise.all( )</code> 메서드를 활용하면 됩니다.</p>
<h3 id="Promise-all-을-이용한-처리-결과에-대한-동기화"><a href="#Promise-all-을-이용한-처리-결과에-대한-동기화" class="headerlink" title="Promise.all( )을 이용한 처리 결과에 대한 동기화"></a>Promise.all( )을 이용한 처리 결과에 대한 동기화</h3><p>Promise.all( ) 메서드는 비동기 응답을 호출 순서에 따라 처리할 수 있는 인터페이스를 제공합니다. 작업 완료 시점이 일정치 않아 뒤바뀐 결정 값의 순서를 호출 순서에 따라 출력해주는 역할을 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncDelay</span>(<span class="params">order: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ms: <span class="built_in">number</span> = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000</span>) + <span class="number">1</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'작업 완료: '</span> + order);</span><br><span class="line">      resolve(order);</span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;).then();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">syncResultPromise</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> p1 = asyncDelay(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> p2 = asyncDelay(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">let</span> p3 = asyncDelay(<span class="number">3</span>);</span><br><span class="line">  <span class="keyword">let</span> p4 = asyncDelay(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Promise</span>.all([p1, p2, p3, p4]).then(<span class="function"><span class="keyword">function</span> (<span class="params">order</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`동기화된 출력: <span class="subst">$&#123;order&#125;</span>`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">syncResultPromise();</span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// 작업 완료: 2</span></span><br><span class="line"><span class="comment">// 작업 완료: 3</span></span><br><span class="line"><span class="comment">// 작업 완료: 4</span></span><br><span class="line"><span class="comment">// 작업 완료: 1</span></span><br><span class="line"><span class="comment">// 동기화된 출력: 1,2,3,4</span></span><br></pre></td></tr></table></figure>

<p>asyncDelay 함수는 임의의 지연시간 후에 작업을 완료하므로, 실행 결과에서 작업 완료의 출력 순서처럼 실행할 때마다 바뀝니다. 그런데 Promise.all( ) 메서드는 각 프로미스 객체의 결정 값을 호출 순서에 맞춰 1, 2, 3, 4와 같이 차례대로 정렬해 출력합니다.</p>
<h1 id="12-2-RxJS를-활용한-데이터-스트림-처리"><a href="#12-2-RxJS를-활용한-데이터-스트림-처리" class="headerlink" title="12.2. RxJS를 활용한 데이터 스트림 처리"></a>12.2. RxJS를 활용한 데이터 스트림 처리</h1><hr>
<h2 id="12-2-1-반응형-프로그래밍"><a href="#12-2-1-반응형-프로그래밍" class="headerlink" title="12.2.1. 반응형 프로그래밍"></a>12.2.1. 반응형 프로그래밍</h2><p>반응형 프로그래밍 모델은 웹 페이지에 들어오는 스트림(stream) 형태의 입력 이벤트를 감지해 반응(responsive)을 처리할 수 있는 모델입니다. 이와 관련한 예로 입력에 반응하는 검색어 제안(keyword suggestion) 기능이 있습니다. 검색어 제안 기능은 사용자가 어떠한 단어를 입력하면 단어에 연관된 관련 키워드를 보이는 기능입니다. 검색어 제안 기능은 서용자가 입력한 키값이 데이터 스트림(data stream) 형태로 서버에 전달되고 처리 결과를 받아 추천 키워드 목록으로 응답해 줍니다.</p>
<h2 id="12-3-동시성을-활용한-비동기-호출-제어"><a href="#12-3-동시성을-활용한-비동기-호출-제어" class="headerlink" title="12.3. 동시성을 활용한 비동기 호출 제어"></a>12.3. 동시성을 활용한 비동기 호출 제어</h2><hr>
<h3 id="12-3-1-동시성과-동기화-작업"><a href="#12-3-1-동시성과-동기화-작업" class="headerlink" title="12.3.1. 동시성과 동기화 작업"></a>12.3.1. 동시성과 동기화 작업</h3><p><strong>동시성(concurrency)</strong>이란 멀티 스레드(multi threads)와 같이 여러 개의 단위 작업이 동시에 실행되는 성질을 말합니다. 자바스크립트에서 동시성은 작업을 동시에 처리하는 것을 의미합니다.</p>
<ul>
<li>비동기 프로그래밍 모델</li>
<li>멀티 스레드 프로그래밍</li>
</ul>
<p>비동기 프로그래밍 모델은 HTTP 요청과 같은 비동기 요청 상황에 해당하는 모델입니다. 비동기 프로그래밍 모델은 동기 프로그래밍과 달리, 단위 작업(task)을 하나의 스레드 내에서 번갈아 가며 실행합니다. 여기서 <strong>스레드(threads)</strong>는 프로세스보다 작은 단위로 프로세스 내에 존재하는 작은 작업 단위를 의미합니다.</p>
<p>멀티 스레드 프로그래밍은 멀티 코어 기기상에서 여러 스레드에서 작업을 동시에 실행하는 방식입니다. 여러 작업을 동시에 실행하기 때문에 병렬성(parallelism)의 특성이 있습니다.</p>
<p>자바스크립트는 멀티 스레딩을 지원하지 않습니다. 자바스크립트가 멀티 스레딩을 지원하지 않는 이유는 싱글 스레드만으로 페이지를 로딩할 때보다 더 빠른 속도로 실행할 수 있기 때문입니다.</p>
<p>그러나 이보다 더 근본적인 이유로는 브라우저의 인터프리터(interpreter)가 단일 스레드여서 멀티 스레드를 지원하지 않기 때문입니다.</p>
<p>비동기 프로그래밍은 작업을 순차적으로 실행하지 않고 응답 시간을 고려해 실행 순서가 결정됩니다. 비동기 요청을 한 순서대로 동기화 실행(synchronous execution)을 한다면 호출 순서를 고려한 처리가 가능할 것입니다. 이처럼 비동기 호출 작업의 실행 순서를 동기화하면 중첩 스코프가 생기지 않아 좋고 비동기 응답을 제어할 수 있게 돼서 더욱 좋습니다. 이와 관련한 특징이 바로 <code>Async/Await</code>입니다.</p>
<h3 id="12-3-2-Async-Await-소개와-설정"><a href="#12-3-2-Async-Await-소개와-설정" class="headerlink" title="12.3.2. Async/Await 소개와 설정"></a>12.3.2. Async/Await 소개와 설정</h3><p>Async/Await는 ES2015에 제안됐고 타입스크립트에서는 1.7에서 추가됐습니다. Async/Await를 이용하면 비동기 함수를 동기화할 수 있습니다. Async/Await를 지원하려면 target을 ES6(ES2015)로 맞춰 두어야 합니다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"module"</span>: <span class="string">"commonjs"</span>,</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"es6"</span>,</span><br><span class="line">    <span class="attr">"noImplicity"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"sourceMap"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"outDir"</span>: <span class="string">"./dist"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>만약, target이 ES6가 아니라 ES5로 하려면 하위 표준에서 호환될 수 있도록 lib 옵션을 통해 조정해야 합니다. TS 2.1이 나오기 전에는 ES6를 대상으로 한정적으로 지원됐지만, TS 2.1이 나오면서 ES3와 ES5의 런타임 환경에서도 지원하게 됐습니다. TS 2.1 이상에서 lib 옵션과 관련한 구성은 다음과 같습니다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"lib"</span>: [<span class="string">"dom"</span>, <span class="string">"es2015.promise"</span>, <span class="string">"es5"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-3-Async-Await를-이용한-동기화"><a href="#12-3-3-Async-Await를-이용한-동기화" class="headerlink" title="12.3.3. Async/Await를 이용한 동기화"></a>12.3.3. Async/Await를 이용한 동기화</h3><h3 id="비동기-호출-코드"><a href="#비동기-호출-코드" class="headerlink" title="비동기 호출 코드"></a>비동기 호출 코드</h3><p>비동기 호출은 응답 시간이 저마다 다를 수 있으므로 차례대로 실행되지 않고 호출 시간과 응답 시간을 고려해 동작을 수행합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">msg: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ms: <span class="built_in">number</span> = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000</span>) + <span class="number">1</span>;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(msg, ms + <span class="string">'ms'</span>);</span><br><span class="line">  &#125;, ms);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncDelay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  delay(<span class="string">'a'</span>);</span><br><span class="line">  delay(<span class="string">'b'</span>);</span><br><span class="line">  delay(<span class="string">'c'</span>);</span><br><span class="line">&#125;</span><br><span class="line">asyncDelay();</span><br><span class="line"><span class="comment">// [ 실행 결과 ]</span></span><br><span class="line"><span class="comment">// c 219ms</span></span><br><span class="line"><span class="comment">// a 516ms</span></span><br><span class="line"><span class="comment">// b 838ms</span></span><br></pre></td></tr></table></figure>

<p>이처럼 매번 실행 때마다 응답 결과의 순서가 달라지는 것은 동기화되지 않았기 때문입니다.</p>
<h3 id="비동기-호출을-동기화"><a href="#비동기-호출을-동기화" class="headerlink" title="비동기 호출을 동기화"></a>비동기 호출을 동기화</h3><p>비동기 호출이 이뤄지면 보통 응답 시점을 무시하고 작업이 응답되기 전에 다음 작업을 진행하므로 전체 코드의 실행 시간은 짧습니다. 허나 때론 비동기 호출 시 순차적으로 이뤄져야 할 상황이 있습니다. 이는 하나의 비동기 함수의 호출 결과가 다른 비동기 함수의 호출 결과에 영향을 미치는 경우가 그렇습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay2</span>(<span class="params">msg: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ms: <span class="built_in">number</span> = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000</span>) + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, ms, msg);</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v, ms + <span class="string">'ms'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">sync2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> delay2(<span class="string">'a'</span>);</span><br><span class="line">  <span class="keyword">await</span> delay2(<span class="string">'b'</span>);</span><br><span class="line">  <span class="keyword">await</span> delay2(<span class="string">'c'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'시간: '</span>, end - start + <span class="string">'ms'</span>);</span><br><span class="line">&#125;</span><br><span class="line">sync2();</span><br><span class="line"><span class="comment">// [ 실행 결과 ]</span></span><br><span class="line"><span class="comment">// a 691ms</span></span><br><span class="line"><span class="comment">// b 623ms</span></span><br><span class="line"><span class="comment">// c 655ms</span></span><br><span class="line"><span class="comment">// 시간: 2008sm</span></span><br></pre></td></tr></table></figure>

<p>위 실행 결과에서 보듯이 delay2 함수가 동기화돼 호출 순서가 맞춰 실행됐고, 결과도 a, b, c 순으로 출력됐습니다.</p>
<h3 id="비동기-함수의-처리-결과가-영향을-미치도록-동기화-실행"><a href="#비동기-함수의-처리-결과가-영향을-미치도록-동기화-실행" class="headerlink" title="비동기 함수의 처리 결과가 영향을 미치도록 동기화 실행"></a>비동기 함수의 처리 결과가 영향을 미치도록 동기화 실행</h3><p>Async/Await를 구현했을 때 비동기 호출을 하면 호출한 순서대로 작업을 실행하고 마친다는 것을 확인할 수 있습니다. 이때 await로 호출한 함수에서 반환값을 받으려면 반환값을 다음과 같은 형태로 선언해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay3</span>(<span class="params">msg, ms</span>): <span class="title">Promise</span>&lt;<span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(msg);</span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v + <span class="string">' '</span> + ms + <span class="string">'ms'</span>);</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">sync3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="keyword">let</span> result1: <span class="built_in">Promise</span>&lt;<span class="built_in">any</span>&gt; = <span class="keyword">await</span> delay3(<span class="string">'a'</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">let</span> result2: <span class="built_in">Promise</span>&lt;<span class="built_in">any</span>&gt; = <span class="keyword">await</span> delay3(result1 + <span class="string">'b'</span>, <span class="number">500</span>);</span><br><span class="line">  <span class="keyword">let</span> result3: <span class="built_in">Promise</span>&lt;<span class="built_in">any</span>&gt; = <span class="keyword">await</span> delay3(result2 + <span class="string">'b'</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'시간: '</span>, end - start + <span class="string">'ms'</span>);</span><br><span class="line">&#125;</span><br><span class="line">sync3();</span><br><span class="line"><span class="comment">// [ 실행 결과 ]</span></span><br><span class="line"><span class="comment">// a 1000ms</span></span><br><span class="line"><span class="comment">// b 500ms</span></span><br><span class="line"><span class="comment">// c 100ms</span></span><br><span class="line"><span class="comment">// 시간: 1640ms</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/06/03/typescript-type-assertion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/03/typescript-type-assertion/" class="post-title-link" itemprop="url">타입스크립트 스터디 7주차</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-06-03 20:30:00 / Modified: 19:51:58" itemprop="dateCreated datePublished" datetime="2020-06-03T20:30:00+09:00">2020-06-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/06/03/typescript-type-assertion/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/06/03/typescript-type-assertion/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="타입-선언과-변경-타입-호환"><a href="#타입-선언과-변경-타입-호환" class="headerlink" title="타입 선언과 변경, 타입 호환"></a>타입 선언과 변경, 타입 호환</h1><h2 id="타입-선언과-변경"><a href="#타입-선언과-변경" class="headerlink" title="타입 선언과 변경"></a>타입 선언과 변경</h2><hr>
<h2 id="타입-에일리어스"><a href="#타입-에일리어스" class="headerlink" title="타입 에일리어스"></a>타입 에일리어스</h2><h3 id="타입-에일리어스를-이용한-단일-타입-선언"><a href="#타입-에일리어스를-이용한-단일-타입-선언" class="headerlink" title="타입 에일리어스를 이용한 단일 타입 선언"></a>타입 에일리어스를 이용한 단일 타입 선언</h3><p>타입 에일리어스(type alias)는 타입스크립트 1.4 버전부터 지원된 특징입니다. 타입 에일리어스를 이용하면 기존 타입에 새로운 이름을 지을 수 있습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[형식]</span><br><span class="line">type &lt;바인딩 식별자&gt; &#x3D; 타입;</span><br></pre></td></tr></table></figure>

<p>바인딩 식별자(binding identifier)는 타입의 별칭(alias)에 해당하는 타입 에일리어스입니다. 새롭게 정의할 수 있는 타입은 string, number, boolean 등과 같은 단일 타입 외에도 유니언이나 객체 리터럴처럼 다소 복잡한 타입도 가능합니다. 이처럼 타입에 새로운 별칭을 만드는 과정을 줄여서 <strong>에일리어싱(aliasing)</strong>이라 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> usernameType = <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> ageType = <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">type</span> locationType = <span class="built_in">string</span>;</span><br></pre></td></tr></table></figure>

<p>에일리어싱을 할 때 고려할 점은 에일리어싱할 타입이 단일 타입인 경우 타입 별칭이 많아질 뿐 특별한 이점을 얻을 수 없습니다.</p>
<h3 id="타입-에일리어스를-이용한-유니언-타입-선언"><a href="#타입-에일리어스를-이용한-유니언-타입-선언" class="headerlink" title="타입 에일리어스를 이용한 유니언 타입 선언"></a>타입 에일리어스를 이용한 유니언 타입 선언</h3><p>타입 에일리어스는 단일 타입보다는 유니언 타입이나 리터럴 타입과 같은 다소 복잡한 형태의 타입에 적용하면 좋습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> idType = <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> profileType = <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">type</span> User = &#123;</span><br><span class="line">  id: idType;</span><br><span class="line">  profile?: profileType;</span><br><span class="line">  username: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user1: User = &#123; id: <span class="string">'1'</span>, username: <span class="string">'hyeongyu'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> user2: User = &#123; id: <span class="string">'2'</span>, profile: <span class="literal">undefined</span>, username: <span class="string">'thomas'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> user3: User = &#123; id: <span class="string">'3'</span>, profile: <span class="string">'./avatar.png'</span>, username: <span class="string">'koon'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> user1, user1);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> user2, user2);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> user3, user3);</span><br></pre></td></tr></table></figure>

<h3 id="타입-에일리어스를-이용한-배열-타입-선언"><a href="#타입-에일리어스를-이용한-배열-타입-선언" class="headerlink" title="타입 에일리어스를 이용한 배열 타입 선언"></a>타입 에일리어스를 이용한 배열 타입 선언</h3><p>배열은 하나의 변수에 여러 값을 관리할 수 있는 효율적인 자료형입니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ArrayType = <span class="built_in">Array</span>&lt;<span class="built_in">number</span> | <span class="built_in">boolean</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arraySample: ArrayType = [<span class="number">1</span>, <span class="literal">true</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arraySample.toString());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arraySample[<span class="number">0</span>], <span class="keyword">typeof</span> arraySample[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<p><code>Array&lt;number | boolean&gt;</code>과 같이 유니언 타입으로 배열 타입을 선언하면 문자열 “1”이나 문자열 “true”가 입력되는 문제를 방지할 수 있습니다.</p>
<h2 id="타입-추론"><a href="#타입-추론" class="headerlink" title="타입 추론"></a>타입 추론</h2><p>타입스크립트에서는 값을 할당할 때 타입을 명시하지 않으면 타입 추론(type inference)을 통해 타입이 결정됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">0</span>, <span class="string">'c'</span>, <span class="literal">null</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> values);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> values[<span class="number">0</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> values[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> values[<span class="number">2</span>]);</span><br></pre></td></tr></table></figure>

<p>values는 object 타입이며, 내부 요소는 타입이 다르더라도 서로 간에 할당할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">values[<span class="number">0</span>] = values[<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p>그런데 변수의 경우 각 변수에 처음 값이 할당되는 시점에 타입이 정해지므로 초기화가 이뤄진 다음에는 다른 타입의 값을 할당할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> first = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> second = <span class="string">'2'</span>;</span><br><span class="line"><span class="comment">// first = second; &lt;- Error</span></span><br></pre></td></tr></table></figure>

<p>first 변수의 타입은 <code>number</code> 타입으로 결정됐기 때문에 <code>string</code> 타입으로 결정된 변수 second는 first에 할당할 수 없습니다.</p>
<h2 id="타입-캐스팅-변환-어설션"><a href="#타입-캐스팅-변환-어설션" class="headerlink" title="타입 캐스팅, 변환, 어설션"></a>타입 캐스팅, 변환, 어설션</h2><h3 id="타입-캐스팅과-변환"><a href="#타입-캐스팅과-변환" class="headerlink" title="타입 캐스팅과 변환"></a>타입 캐스팅과 변환</h3><p><strong>타입 캐스팅(type casting)</strong>은 명시적으로 선언한 캐스팅 코드에 의한 타입 변경을 의미하며, JS 인터프리터에 의해 타입이 바뀌는 타입 변환(type conversion)과 구분됩니다. 타입 캐스팅의 예로, null이나 undefined를 제외한 인수 값은 기본 래퍼 객체를 이용해 캐스팅할 수 있습니다. 기본 래퍼 객체를 함수 호출 방식으로 사용하며 다음과 같은 종류가 있습니다.</p>
<ul>
<li>String</li>
<li>Number</li>
<li>Boolean</li>
<li>Symbol</li>
</ul>
<p>타입을 변경할 때 기본 래퍼 객체 외에도 <code>+</code> 연산자를 이용할 수 있는데, 이는 Number 함수를 호출하는 방법과 같습니다. 그리고 <code>parseInt</code>를 이용해 숫자가 포함된 문자열을 숫자 타입으로 변경할 수 있습니다. 다만, parseInt 함수가 Number 함수와 다른 점이 있다면 parseInt는 함수 이름처럼 파싱 기능이 있어 숫자 외에 여러 문자가 섞여 있을 때 숫자만을 골라서 숫자 타입으로 변경할 수 있다는 점입니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">'50px'</span>);</span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'1010'</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'50px'</span>);</span><br></pre></td></tr></table></figure>

<p>parseInt 함수는 입력값으로 입력값으로 “50px”와 같이 숫자에 여러 문자가 섞여 있어도 숫자만 선택해 50을 반환합니다. 반면, Number 함수는 문자와 숫자가 섞여 있다면 <code>NaN</code>을 반환합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num1 = +myNum;</span><br><span class="line"><span class="keyword">let</span> num2 = <span class="built_in">Number</span>(myNum);</span><br><span class="line"><span class="keyword">let</span> num3 = <span class="built_in">parseInt</span>(myNum);</span><br></pre></td></tr></table></figure>

<p><code>+</code> 연산자의 경우 문자열이 들어오면 number 타입으로 변환하고, 숫자라면 숫자를 할당하고, 숫자가 아니면 NaN(Not a Number) 값이 됩니다. 변수 myNum에 “a”를 할당했다면, 숫자가 포함되어 있지 않으므로 위 세 가지 방법으로 타입 변환했을 때 모두 NaN 값이 되므로 NaN 값인지 검사하는 로직을 추가해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">isNaN</span>(num1)) &#123;</span><br><span class="line">  <span class="comment">// num1이 NaN이므로 적절한 로직 추가</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>지금까지 살펴본 parseInt, Number와 같은 타입 변환 함수들은 런타임 때 사용되므로 컴파일 후에도 유지됩니다.</p>
<h3 id="타입-어설션"><a href="#타입-어설션" class="headerlink" title="타입 어설션"></a>타입 어설션</h3><p><strong>타입 어설션(type assertion)</strong>을 이용하면 타입스크립트가 타입 어설션 정보를 이용해 컴파일을 수행합니다. 따라서 타입 어설션은 컴파일 과정까지만 유효하고 컴파일 후에는 사라집니다. 타입 어설션의 방식은 크게 꺾쇠 괄호(angle bracket) 방식과 as 문법(as syntax)을 이용한 방식이 있습니다.</p>
<p>타입 어설션은 타입스크립트에서 유효하지만 ES6로 컴파일하면 타입 어설션이 제거됩니다.</p>
<p>타입 어설션에 사용되는 꺾쇠 기호가 포함된 `<number>의 선언 형태는 리액트(React)에서 사용되는 JSX 문법과 유사해 충돌을 일으킵니다. 이러한 단점을 보완하기 위해 타입 어설션은 as 문법을 이용하는 것이 좋습니다.</p>
<p>타입 어설션은 컴파일러에게 전달되는 타입 정보이므로 컴파일러는 타입 어설션을 보고 유효성을 검증합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myNum = <span class="string">'2020'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 타입 캐스팅</span></span><br><span class="line"><span class="keyword">let</span> num1 = +myNum;</span><br><span class="line"><span class="keyword">let</span> num2 = <span class="built_in">Number</span>(myNum);</span><br><span class="line"><span class="keyword">let</span> num3 = <span class="built_in">parseInt</span>(myNum);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 타입 호환</span></span><br><span class="line"><span class="keyword">let</span> num4: <span class="built_in">number</span> = &lt;<span class="built_in">number</span>&gt;myNum;</span><br><span class="line"><span class="keyword">let</span> num5: <span class="built_in">number</span> = myNum <span class="keyword">as</span> <span class="built_in">number</span>;</span><br></pre></td></tr></table></figure>

<p>num1, num2, num3에서 시도한 타입 캐스팅은 컴파일러가 관여하지 않고 런타임에만 동작합니다. num4, num5 번수에 선언된 타입 어설션은 컴파일 단계에만 유효하므로 생성된 자바스크립트가 제거된 것을 확인할 수 있습니다.</p>
<h2 id="타입-호환"><a href="#타입-호환" class="headerlink" title="타입 호환"></a>타입 호환</h2><h3 id="프로그래밍-언어의-타입-시스템"><a href="#프로그래밍-언어의-타입-시스템" class="headerlink" title="프로그래밍 언어의 타입 시스템"></a>프로그래밍 언어의 타입 시스템</h3><p>프로그래밍 언어는 타입 시스템(type system)을 갖춤으로써 컴파일 시점에 타입 검사를 통해 타입에서 비롯되는 오류를 방지합니다. 프로그래밍 언어마다 타입 검사 시점이 다른데 타입 검사는 크게 다음과 같은 두 가지 방식으로 나뉩니다.</p>
<ul>
<li>동적 타입 검사(dynamic type checking)</li>
<li>정적 타입 검사(static type checking)</li>
</ul>
<p>자바스크립트 같은 동적 프로그래밍 언어는 런타임 시점에 동적 타입 검사를 수행하고, 타입스크립트 같은 정적 언어는 컴파일 시점에 정적 타입 검사를 수행합니다.</p>
<ul>
<li>구조 타입 시스템(structural type system)</li>
<li>명목 타입 시스템(nominal type system)</li>
</ul>
<p>구조 타입 시스템은 타입의 구조와 정의만 같다면 타입 호환이 가능합니다. 이와 달리 명목 타입 시스템은 타입 호환이 되려면 명시적으로 같은 타입이어야 합니다. 전통적인 C++나 자바 같은 언어는 명목 타입 시스템을 지원하지만, 타입스크립트는 명목 타입 시스템뿐 아니라 구조 타입 시스템도 지원합니다.</p>
<p>타입스크립트는 크게 네 부류의 타이핑 방식을 지원합니다.</p>
<ul>
<li>덕 타이핑(duck typing)</li>
<li>구조 타이핑(structural typing)</li>
<li>구조 서브타이핑(structural subtyping)</li>
<li>명목 타이핑(nominal typing)</li>
</ul>
<p>첫째는 덕 타이핑으로 런타임 시 동적으로 타입의 구조가 정해지는 타입 지정 방식입니다.</p>
<p>둘째는 구조 타이핑으로 타입의 구조만 같으면 서로 호환 가능한 타입 지정 방식입니다.</p>
<p>셋째는 구조 서브타이핑으로 구조가 부분적으로 같더라도 타입 호환만을 지원합니다.</p>
<p>마지막으로 명목 타이핑으로, 타입 구조뿐 아니라 타입까지 같아야 호환 가능한 타입 지정 방식입니다.</p>
<h3 id="덕-타이핑"><a href="#덕-타이핑" class="headerlink" title="덕 타이핑"></a>덕 타이핑</h3><p>덕 타이핑은 동적 타이핑 방식으로서 자바스크립트 코드의 런타임 시 동적으로 타이핑이 이뤄지는 타입 지정 방식입니다.</p>
<p>덕 타이핑은 동적으로 타입이 결정되므로 유연하지만 타입 안전성은 떨어집니다.</p>
<p>만약, 덕 타이핑을 할 때 타입 안전성을 강화하려면 인터페이스를 도입하면 됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> DuckGoose &#123;</span><br><span class="line">  speak();</span><br><span class="line">  swim();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swim</span>(<span class="params">obj: DuckGoose</span>) </span>&#123;</span><br><span class="line">  obj.speak();</span><br><span class="line">  obj.swim();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>매개변수로 입력될 객체의 행동은 인터페이스 타입(DuckGoose)으로 제한할 수 있습니다. 이때 인터페이스로 입력되는 객체의 클래스가 서브 클래스이고 슈퍼 클래스를 대체할 수 있을 때 서브타이핑(sub typing)이 됩니다.</p>
<h3 id="구조-타이핑"><a href="#구조-타이핑" class="headerlink" title="구조 타이핑"></a>구조 타이핑</h3><p>타입스크립트는 타입 안전성을 위해 컴파일 시간에 타입 검사를 수행합니다. 그러나 모든 타입에 타입 검사가 이뤄지는 것은 아닙니다.</p>
<h3 id="구조가-같은-클래스-간의-구조-타이핑"><a href="#구조가-같은-클래스-간의-구조-타이핑" class="headerlink" title="구조가 같은 클래스 간의 구조 타이핑"></a>구조가 같은 클래스 간의 구조 타이핑</h3><p>구조가 같은 클래스 간에는 서로 타입 호환이 가능해서 서로의 타입으로 구조 타이핑이 가능합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Animal &#123;</span><br><span class="line">  name: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span>, weight: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Bird &#123;</span><br><span class="line">  name: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">speed: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> animal: Animal = <span class="keyword">new</span> Animal(<span class="string">'happy'</span>, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">let</span> bird: Bird = <span class="keyword">new</span> Bird(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">animal = bird;</span><br><span class="line">bird = animal;</span><br></pre></td></tr></table></figure>

<p>위의 예제에서는 Animal과 Bird 클래스의 멤버 변수가 같으므로 서로 타입 호환이 가능합니다. 그런테 생성자의 매개변수는 다릅니다. 하지만 생성자의 매개변수가 달라도 타입 호환이 되는 데는 문제가 없습니다. 생성자 매개변수는 접근 제한자가 설정되지 않아 생성자 내부에서만 사용할 수 있으므로 클래스 구조의 영향을 미치지 않기 때문입니다.</p>
<h3 id="구조가-같은-클래스-간의-구조-타이핑-상속-관계-고려"><a href="#구조가-같은-클래스-간의-구조-타이핑-상속-관계-고려" class="headerlink" title="구조가 같은 클래스 간의 구조 타이핑(상속 관계 고려)"></a>구조가 같은 클래스 간의 구조 타이핑(상속 관계 고려)</h3><p>부모를 가진 자식 클래스와 같은 구조의 클래스가 있다면 이 두 클래스는 구조 타이핑이 가능합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">  <span class="keyword">public</span> name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Member <span class="keyword">extends</span> Person &#123;</span><br><span class="line">  <span class="keyword">public</span> grade: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Admin <span class="keyword">extends</span> Member &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> MemberCard &#123;</span><br><span class="line">  <span class="keyword">public</span> name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> grade: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> admin: Admin = <span class="keyword">new</span> Admin();</span><br><span class="line">admin = <span class="keyword">new</span> MemberCard();</span><br></pre></td></tr></table></figure>

<p>위 예제에서 Admin과 MemberCard 클래스는 상속 관계도 아니고 아무런 관계가 없습니다. 그러나 같은 구조의 멤버 변수를 가지고 있습니다. Admin 클래스가 Member와 Person 클래스의 멤버를 상속하므로 MemberCard 클래스와 동일한 멤버 변수를 갖게 됩니다. 따라서 서로의 타입으로 구조 타이핑이 가능합니다.</p>
<h3 id="구조가-같은-클래스와-인터페이스-간의-구조-타이핑"><a href="#구조가-같은-클래스와-인터페이스-간의-구조-타이핑" class="headerlink" title="구조가 같은 클래스와 인터페이스 간의 구조 타이핑"></a>구조가 같은 클래스와 인터페이스 간의 구조 타이핑</h3><p>클래스와 인터페이스의 구조가 같다면 타입 호환이 가능해 서로의 타입으로 구조 타이핑이 가능합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Employee &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person: Person;</span><br><span class="line">person = <span class="keyword">new</span> Employee();</span><br></pre></td></tr></table></figure>

<p>Employee 클래스와 Person 인터페이스는 명시적으로 서로 관계가 없지만 타입스크립트는 구조 타입 시스템을 지원하므로 인터페이스와 클래스의 구조만 같다면 상호 구조 타이핑이 가능합니다.</p>
<h2 id="구조-서브타이핑"><a href="#구조-서브타이핑" class="headerlink" title="구조 서브타이핑"></a>구조 서브타이핑</h2><p>구조 타이핑은 타입 구조가 같아야지만 타입 호환이 이뤄지지만, 구조 서브타이핑은 구조가 부분적으로 같더라도 타입 호환을 지원합니다.</p>
<h3 id="구조-서브타이핑의-조건"><a href="#구조-서브타이핑의-조건" class="headerlink" title="구조 서브타이핑의 조건"></a>구조 서브타이핑의 조건</h3><p>구조 서브타이핑은 하위 타입이 상위 타입으로만 호환되는 조건이 있습니다.</p>
<ul>
<li>상위 타입 <code>{ a: string, b: string }</code></li>
<li>하위 타입 <code>{ a: string, b: string, c: string }</code></li>
</ul>
<p>하위 타입은 상위 타입의 속성을 포함합니다. 이 때 “상위 타입 = 하위 타입”처럼 하위 타입을 상위 타입에 대입하는 것으로 구조 서브타이핑이 가능합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> upper = &#123; a: <span class="built_in">string</span>; b: <span class="built_in">string</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> sub = &#123; a: <span class="built_in">string</span>; b: <span class="built_in">string</span>; c: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> objectUpper: upper = &#123; a: <span class="string">'a'</span>, b: <span class="string">'b'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> objectSub: sub = &#123; a: <span class="string">'a'</span>, b: <span class="string">'b'</span>, c: <span class="string">'c'</span> &#125;;</span><br><span class="line">objectUpper = objectSub;</span><br><span class="line"><span class="built_in">console</span>.log(objectUpper);</span><br></pre></td></tr></table></figure>

<h3 id="타입은-없지만-구조가-일부-같은-변수-간의-구조-서브타이핑"><a href="#타입은-없지만-구조가-일부-같은-변수-간의-구조-서브타이핑" class="headerlink" title="타입은 없지만 구조가 일부 같은 변수 간의 구조 서브타이핑"></a>타입은 없지만 구조가 일부 같은 변수 간의 구조 서브타이핑</h3><p>구조가 일부 같으면 타입이 없더라도 변수 간의 구조 서브타이핑이 가능합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> infoUpper = &#123; name: <span class="string">'hyeongyu'</span>, country: <span class="string">'korea'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> infoSub = &#123; name: <span class="string">'hyeongyu'</span>, country: <span class="string">'korea'</span>, gender: <span class="string">'M'</span> &#125;;</span><br><span class="line">infoUpper = infoSub;</span><br></pre></td></tr></table></figure>

<h3 id="구조가-일부-같은-객체와-인터페이스-간의-구조-서브타이핑"><a href="#구조가-일부-같은-객체와-인터페이스-간의-구조-서브타이핑" class="headerlink" title="구조가 일부 같은 객체와 인터페이스 간의 구조 서브타이핑"></a>구조가 일부 같은 객체와 인터페이스 간의 구조 서브타이핑</h3><p>객체 리터럴(객체)이 할당된 변수에 인터페이스 타입을 지정하면 해당 변수는 구조 서브타이핑이 적용됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> GroupUpper &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> groupSub = &#123; name: <span class="string">'hyeongyu'</span>, id: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> groupUpper: GroupUpper;</span><br><span class="line">groupUpper = groupSub;</span><br></pre></td></tr></table></figure>

<p>groupUpper 변수는 서브타이핑이 적용되었기 때문에 할당 받은 객체의 id 속성에 접근할 수 없게 됩니다.</p>
<h2 id="명목-타이핑"><a href="#명목-타이핑" class="headerlink" title="명목 타이핑"></a>명목 타이핑</h2><p>명목 타이핑은 자바나 C++, C#과 같은 전통적인 언어에서 사용하는 타이핑 방식으로 명시적으로 지정된 타입 간에만 타입이 호환됩니다. 명목 타이핑에 대한 예로 <code>Enum</code>이 있습니다. 같은 Enum 타입으로 지정된 변수 간에만 타입이 호환됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> EastAsia1 &#123;</span><br><span class="line">  korea = <span class="number">88</span>,</span><br><span class="line">  china = <span class="number">86</span>,</span><br><span class="line">  japan = <span class="number">81</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> EastAsia2 &#123;</span><br><span class="line">  korea = <span class="number">88</span>,</span><br><span class="line">  china = <span class="number">86</span>,</span><br><span class="line">  japan = <span class="number">81</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> east1: EastAsia1 = EastAsia1.china;</span><br><span class="line"><span class="keyword">let</span> east1: EastAsia2 = EastAsia1.korea;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let east1: EastAsia1 = EastAsia2.china;</span></span><br><span class="line"><span class="comment">// let east2: EastAsia2 = EastAsia1.korea;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/05/20/typescript-advanced-type/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/typescript-advanced-type/" class="post-title-link" itemprop="url">타입스크립트 스터디 6주차</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-20 20:30:00 / Modified: 19:34:40" itemprop="dateCreated datePublished" datetime="2020-05-20T20:30:00+09:00">2020-05-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/20/typescript-advanced-type/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/typescript-advanced-type/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="고급-타입"><a href="#고급-타입" class="headerlink" title="고급 타입"></a>고급 타입</h1><h2 id="9-1-유니언-타입과-타입-가드"><a href="#9-1-유니언-타입과-타입-가드" class="headerlink" title="9.1. 유니언 타입과 타입 가드"></a>9.1. 유니언 타입과 타입 가드</h2><hr>
<h3 id="9-1-1-유니언-타입"><a href="#9-1-1-유니언-타입" class="headerlink" title="9.1.1. 유니언 타입"></a>9.1.1. 유니언 타입</h3><p>유니언 타입으(union types)은 타입스크립트 1.4에 추가된 특징입니다. 유니언 타입은 2개 이상의 타입을 하나의 타입으로 정의한 타입입니다. 유니언 타입을 선언할 때는 파이프( | )를 타입명 사이에 넣습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[형식]</span><br><span class="line">타입 A | 타입B | 타입C</span><br></pre></td></tr></table></figure>

<p>유니언 타입으로 선언된 변수는 나열된 타입 중 하나의 타입에 속한 값만 할당됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x: <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line">a = <span class="string">'happy'</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<p>유니언 타입을 구성하는 string과 number는 <strong>유니언 타입의 상위 타입</strong>이 됩니다.</p>
<p>유니언 타입은 함수의 매개변수를 타입별로 나눠 어떠한 처리를 해야 할 때 유용하게 사용할 수 있습니다. 또한 여러 반환 타입을 갖도록 명시할 수도 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">p: <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span></span>): <span class="title">string</span> | <span class="title">number</span> | <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> p === <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> p === <span class="string">'number'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-1-2-타입-가드"><a href="#9-1-2-타입-가드" class="headerlink" title="9.1.2. 타입 가드"></a>9.1.2. 타입 가드</h3><p>유니언 타입은 여러 타입을 받을 수 있다는 장점이 있습니다. 그런데 유니언 타입은 여러 타입을 받음으로써 타입을 확신할 수 없다는 문제가 있습니다. 따라서 매개변수가 유니언 타입일 때 안전한 값을 할당하려면 타입 검사를 거쳐 매개변수 값을 받아야 합니다. 이처럼 유니언 타입에 대한 타입 검사를 통해 타입 안전성을 주는 방법을 <strong>타입 가드(type guards)</strong>라고 합니다.</p>
<p>타입 가드는 문법적인 특징이라기보다 유니언 타입에 속한 특정 타입인지 검사해 타입 안전성을 확보하는 방법입니다. 타입 가드는 유니언 타입으로 지정된 변수에 대해 <code>typeof</code>나 <code>instanceof</code> 연산자를 활용해 타입 질의를 한 후 명시된 타입과 일치하는지 검사합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myIndexOf</span>(<span class="params">x: <span class="built_in">number</span> | <span class="built_in">string</span>, y: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> x === <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x.indexOf(y);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(myIndexOf(<span class="string">'hello'</span>, <span class="string">'e'</span>));</span><br></pre></td></tr></table></figure>

<p>타입이 여럿일 때 특정 타입인지 확인해 타입 안전성을 확보하는 것을 타입 가드라고 합니다.</p>
<h3 id="instanceof를-이용한-타입-검사"><a href="#instanceof를-이용한-타입-검사" class="headerlink" title="instanceof를 이용한 타입 검사"></a>instanceof를 이용한 타입 검사</h3><p>클래스도 유니언 타입 형태로 지정할 수 있습니다. 이때도 마찬가지로 클래스에 대한 타입을 확신할 수 있으려면 <code>instanceof</code> 연산자를 통해 같은 클래스인지 확인해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Car &#123;</span><br><span class="line">  name = <span class="string">'cat'</span>;</span><br><span class="line">  age = <span class="number">13</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Dog &#123;</span><br><span class="line">  name = <span class="string">'dog'</span>;</span><br><span class="line">  leg = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">diffCheck</span>(<span class="params">x: Cat | Dog</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x <span class="keyword">instanceof</span> Dog) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x.name, x.leg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(x.name);</span><br><span class="line">  <span class="comment">// console.log(x.leg);	&lt;- 오류</span></span><br><span class="line">  <span class="comment">// console.log(x.age);	&lt;- 오류</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">diffCheck(<span class="keyword">new</span> Dog());</span><br></pre></td></tr></table></figure>

<h2 id="9-2-알아두면-쓸모-있는-고급-타입들"><a href="#9-2-알아두면-쓸모-있는-고급-타입들" class="headerlink" title="9.2. 알아두면 쓸모 있는 고급 타입들"></a>9.2. 알아두면 쓸모 있는 고급 타입들</h2><hr>
<h3 id="9-2-1-문자열-리터럴-타입"><a href="#9-2-1-문자열-리터럴-타입" class="headerlink" title="9.2.1. 문자열 리터럴 타입"></a>9.2.1. 문자열 리터럴 타입</h3><p>문자열 리터럴 타입은 타입에 정의한 문자열만 할당받을 수 있게 하는 타입입니다. 문자열 리터럴 타입은 사용자 정의 타입이므로 사용자가 정의해 사용합니다.</p>
<p>문자열 리터럴 타입은 유니언 타입과 결합해 사용하면 허용할 문자열을 여러 개 지정할 수 있습니다. 예를 들어, 변수에 “keyup”이나 “mouseover”에 대한 값만 할당받고자 한다면 다음과 같은 형식으로 선언합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> EventType = <span class="string">"keyup"</span> | <span class="string">"mouseover"</span>;</span><br></pre></td></tr></table></figure>

<p>그러고 나면 EventType을 번수를 선언할 때 타입으로 지정할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> EventType = <span class="string">"keyup"</span> | <span class="string">"mouseover"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myEvent: EventType = <span class="string">"keyup"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> myEvent, myEvent);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">on</span>(<span class="params">event: EventType, callback: (message: <span class="built_in">string</span>) =&gt; <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> event, event);</span><br><span class="line">  callback(<span class="string">"callback!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">on(myEvent, <span class="function">(<span class="params">message</span>) =&gt;</span> <span class="built_in">console</span>.log(message));</span><br><span class="line"></span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// string keyup</span></span><br><span class="line"><span class="comment">// string keyup</span></span><br><span class="line"><span class="comment">// callback!</span></span><br></pre></td></tr></table></figure>

<p>on 함수의 첫 번째 인수는 EventType 타입이므로 “keyup” 또는 “mouseover” 문자열 중 하나만 받을 수 있습니다.</p>
<h3 id="9-2-2-룩업-타입"><a href="#9-2-2-룩업-타입" class="headerlink" title="9.2.2. 룩업 타입"></a>9.2.2. 룩업 타입</h3><p>룩업(lookup) 타입은 타입스크립트 2.1에 추가된 타입입니다. 룩업 타입은 인덱스 접근 타입으로 불리는데, 그 이유는 keyof를 통해 타입T의 하위 타입을 생성해 내기 때문입니다. 여기서 타입 T는 여러 타입으로 이뤄진 유니언이나 인터페이스 타입을 가리킵니다. 예를 들어 타입 T가 유니언 타입인 경우를 보겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> testUnion: <span class="string">'name'</span> | <span class="string">'gender'</span> | <span class="string">'age'</span> = <span class="string">'name'</span>;</span><br></pre></td></tr></table></figure>

<p>위에 사용한 <code>&quot;name&quot; | &quot;gender&quot; | &quot;age&quot;</code>는 단순한 나열이지만 때로는 유니언 타입의 구조가 복잡해지는 경우가 있습니다. 이럴 때는 확장성을 고려해 인터페이스를 도입할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Profile &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  gender: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제 이 인터페이스를 <code>keyof</code>를 이용해 룩업 타입으로 선언해보겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Profile1 = keyof Profile;</span><br></pre></td></tr></table></figure>

<p>Profile1 룩업 타입으로 선언한 변수는 Profile 인터페이스의 속성 이름(“name”, “gender”, “age”) 중 하나를 할당 받을 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pValue: Profile1 = <span class="string">'name'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-2-3-non-nullable-타입"><a href="#9-2-3-non-nullable-타입" class="headerlink" title="9.2.3. non-nullable 타입"></a>9.2.3. non-nullable 타입</h3><p>타입스크립트 2.0에 추가된 특징으로 non-nullable 타입이 있습니다. non-nullable 타입은 컴파일러가 <code>null</code>이나 <code>undefined</code>를 엄격하게 제한합니다.</p>
<h3 id="non-nullable-타입의-등장-배경"><a href="#non-nullable-타입의-등장-배경" class="headerlink" title="non-nullable 타입의 등장 배경"></a>non-nullable 타입의 등장 배경</h3><p>타입스크립트 2.0 전에는 null이나 undefined를 모든 타입의 변수에 할당할 수 있었습니다. 예를 들어, string 타입으로 선언된 변수에 null이나 undefined를 할당할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myName: <span class="built_in">string</span>;</span><br><span class="line">myName = <span class="literal">null</span>;</span><br><span class="line">myName = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>

<p>string 타입이 아닌 boolean이나 number 타입으로 선언해도 null이나 undefined를 할당할 수 있습니다. 이처럼 null과 undefined를 할당할 수 있게 해는 것은 타입에 모호성을 줍니다. 그래서 타입스크립트 2.0에서는 이를 명확히 하려고 <code>strictNullCheck</code>라는 옵션이 추가됐습니다.</p>
<h3 id="null-undefined를-허용하지-않는-non-nullable-타입"><a href="#null-undefined를-허용하지-않는-non-nullable-타입" class="headerlink" title="null/undefined를 허용하지 않는 non-nullable 타입"></a>null/undefined를 허용하지 않는 non-nullable 타입</h3><p>null을 허용하지 않는 변수를 만들려면 변수에 null/undefined가 할당되는 것을 막아햐 합니다. 그러려면 tsconfig.json 파일의 strictNullChecks 옵션을 true로 설정하는 방법이 있습니다. 이렇게 하면 특정 타입으로 선언된 변수에 null과 undefined가 할당되지 않아 타입 사용이 명확해집니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="string">"strictNullChecks"</span>: <span class="literal">true</span>,</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>위와 같이 strictNullChecks 옵션을 true로 설정하면 null이나 undefined를 변수에 할당할 수 없게 돼 non-nullable 타입이 변수에 적용됩니다.</p>
<h3 id="non-nullable일때-null이나-undefined를-할당하는-방법"><a href="#non-nullable일때-null이나-undefined를-할당하는-방법" class="headerlink" title="non-nullable일때 null이나 undefined를 할당하는 방법"></a>non-nullable일때 null이나 undefined를 할당하는 방법</h3><p>컴파일러 옵션인 strictNullChecks가 true면 non-nullable 타입이 적용돼 null이나 undefined를 변수에 할당할 수 없고, 할당하게 되면 컴파일 에러가 발생합니다. 만약 strictNullChecks가 true일 때 null이나 undefined를 할당하려면 유니언 타입으로 만들면 됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> title: <span class="built_in">string</span> | <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> description: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>

<p>위에 선언된 변수는 유니언 타입을 이용해 strictNullChecks 옵션을 true로 설정해도 null이나 undefined를 허용할 수 있습니다.</p>
<h3 id="9-2-4-네버-타입"><a href="#9-2-4-네버-타입" class="headerlink" title="9.2.4. 네버 타입"></a>9.2.4. 네버 타입</h3><p>타입스크립트 2.0에 내장 타입으로 네버(never) 타입이 추가됐습니다. 네버는 모든 타입의 하위 타입으로 사용할 수 있지만, <code>any</code> 타입을 <code>never</code> 타입에 할당할 수는 없습니다. never 타입은 다음과 같은 두 가지 상황에서 사용됩니다.</p>
<ol>
<li>함수에 닿을 수 없는 코드 영역이 있어 반환값이 존재하지 않을 때</li>
<li>함수에 Throw 객체가 반환돼 오류가 발생할 때</li>
</ol>
<p>첫 번째 상황의 예로 <code>while(true)</code>와 같은 무한 루프를 들 수 있습니다. 두 번째 상황은 <code>Throw</code> 객체가 생성되면 함수가 정상적으로 종료된 것이 아니므로 네버 타입이 됩니다.</p>
<h3 id="닿을-수-없는-코드의-의미"><a href="#닿을-수-없는-코드의-의미" class="headerlink" title="닿을 수 없는 코드의 의미"></a>닿을 수 없는 코드의 의미</h3><p>‘닿을 수 없는 코드(unreachable code)’의 예로 끝나지 않는 <strong>무한 루프</strong>가 있습니다. 함수에 무한 루프가 있으면 무한 루프 이후의 코드는 절대 실행되지 않습니다. 따라서 해당 코드는 모두 닿을 수 없는 코드가 되며 never 타입이 됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> neverTouch = <span class="function"><span class="keyword">function</span> (<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Never'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// console.log();	&lt;- 닿을 수 없는 코드</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> resultNever: never = neverTouch();</span><br></pre></td></tr></table></figure>

<h3 id="예외-객체가-반환될-때"><a href="#예외-객체가-반환될-때" class="headerlink" title="예외 객체가 반환될 때"></a>예외 객체가 반환될 때</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> error(<span class="string">'error!!!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fail();</span><br></pre></td></tr></table></figure>

<h3 id="9-2-5-this-타입"><a href="#9-2-5-this-타입" class="headerlink" title="9.2.5. this 타입"></a>9.2.5. this 타입</h3><p><code>this</code> 타입은 인터페이스와 클래스의 하위 타입이면서 이들을 참조할 수도 있는 타입입니다. this 타입을 다형적 this 타입(polymorphic this type)이라고도 하는데, 선언 위치에 따라 참조하는 대상이 달라지기 때문입니다. 클래스 멤버 변수나 생성자에서 this 타입을 사용하면 가장 가까운 클래스의 인스턴스를 참조합니다. 인터페이스 멤버에 this 타입을 사용하면 this 타입은 인터페이스를 참조합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ListItem &#123;</span><br><span class="line">  getHead(): <span class="keyword">this</span>;</span><br><span class="line">  getTail(): <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>클래스 메서드에서 재귀 타입을 사용하는 계산기 예제를 봅시다. obj가 계산기 객체이고 객체 내부에 계산에 필요한 여러 메서드가 포함돼 있다고 해봅시다. 이때 “1 * 5 + 10”과 같은 식을 좀 더 편리하게 계산하기 위해 메서드를 체이닝(chaining)하면 코드를 간결하게 입력할 수 있습니다.</p>
<p>이처럼 자기 자신(self)을 반환하는 인스턴스 메서드를 활용해 체이닝 형태로 선언하 면 마치 데이터가 흐르는 듯이 표현할 수 있는데 이러한 패턴을 <strong>플루언트 인터페이스 패턴(fluent interface pattern)</strong>이라 하고 줄여서 플루언트 패턴이라고 합니다.</p>
<p>플루언트 패턴을 구현할 때는 메서드가 인스턴스 자신을 가리키는 this 타입을 반환하게 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> AddCalc &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> value: <span class="built_in">number</span> = 0</span>) &#123;&#125;</span><br><span class="line">  <span class="keyword">public</span> add(operand: <span class="built_in">number</span>): <span class="keyword">this</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.value += operand;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> MyCalc <span class="keyword">extends</span> AddCalc &#123;</span><br><span class="line">  <span class="keyword">public</span> multiply(operand: <span class="built_in">number</span>): <span class="keyword">this</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.value *= operand;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> calc = <span class="keyword">new</span> MyCalc(<span class="number">3</span>).multiply(<span class="number">5</span>).add(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(calc.value);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// 25</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/05/20/typescript-module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/20/typescript-module/" class="post-title-link" itemprop="url">타입스크립트 스터디 5주차</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-20 19:30:00 / Modified: 21:27:01" itemprop="dateCreated datePublished" datetime="2020-05-20T19:30:00+09:00">2020-05-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/20/typescript-module/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/20/typescript-module/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="모듈-Module"><a href="#모듈-Module" class="headerlink" title="모듈 (Module)"></a>모듈 (Module)</h1><h2 id="8-1-모듈에-대한-이해"><a href="#8-1-모듈에-대한-이해" class="headerlink" title="8.1. 모듈에 대한 이해"></a>8.1. 모듈에 대한 이해</h2><hr>
<h3 id="8-1-1-모듈에-대한-이해와-필요성"><a href="#8-1-1-모듈에-대한-이해와-필요성" class="headerlink" title="8.1.1. 모듈에 대한 이해와 필요성"></a>8.1.1. 모듈에 대한 이해와 필요성</h3><p>모듈은 독립 가능한 기능의 단입니다. 프로그램은 이러한 모듈들로 구성돼 있고 모듈을 결합하여 하나의 프로그램을 만듭니다. 모듈을 사용하면 다음과 같은 장점이 있습니다.</p>
<ul>
<li>유지보수의 용이성</li>
<li>전역 스코프 오염을 방지</li>
<li>재사용성 향상</li>
</ul>
<p>모듈을 사용하면 유지보수가 쉬워집니다. 모듈을 사용하지 않으면 같은 연산을 수행하는 중복 코드들이 생기고 이는 유지보수를 어렵게 합니다. 자주 사용하는 공통 기능을 모듈로 정의해 사용하면 애플리케이션의 전체적인 수정 없이 모듈의 수정이나 교체만으로도 코드를 효과적으로 수정할 수 있습니다.</p>
<p>또한 모듈은 전역 스코프 오염(global scope pollution)을 방지합니다. 전역 스코프는 전역 이름 공간(global namespace)을 가지므로 번수 이름이나 함수 이름을 중복해 선언할 수 없습니다. 그런데 변수나 함수 등을 파일 내부에 한정해 모듈로 선언하면 이름 공간이 파일 단위로 제한되며 전역 이름 공간을 침범하지 않습니다.</p>
<p>마지막 장점은 모듈을 사용하면 재사용성(reusability)이 향상됩니다. 모듈은 프로젝트에서 자주 사용되는 공통 기능으로 호출될 가능성이 높습니다.</p>
<h3 id="8-1-2-내부-모듈과-외부-모듈"><a href="#8-1-2-내부-모듈과-외부-모듈" class="headerlink" title="8.1.2. 내부 모듈과 외부 모듈"></a>8.1.2. 내부 모듈과 외부 모듈</h3><p>타입스크립트의 모듈을 이해하려면 내부 모듈과 외부 모듈로 구분해야 합니다. 타입스크립트 1.5가 등장하면서 네임스페이스라는 특징과 ES2015 모듈의 특성이 추가됐고 ECMA스크립트 표준 용어집에 따라 모듈이라는 용어가 두 가지로 나뉘게 되었습니다.</p>
<ul>
<li>내부 모듈(internal module)</li>
<li>외부 모듈(external module)</li>
</ul>
<p>내부 모듈은 네임스페이스를 의미하고 외부 모듈은 export라고 선언해 외부로 공개된 모듈을 말합니다.</p>
<h3 id="내부-모듈"><a href="#내부-모듈" class="headerlink" title="내부 모듈"></a>내부 모듈</h3><p>내부 모듈인 네임스페이스는 전역 이름 공간과 분리된 네임스페이스 단위의 이름 공간입니다. 따라서 같은 네임스페이스의 이름 공간이라면 파일 B가 파일 A에 선언된 모듈을 참조(reference)할 수 있는데 참조할 때는 별도의 참주문을 선언하지 않아도 됩니다. 기억할 점은 파일이 다르더라도 같은 프로젝트 내에서 같은 네임스페이스 내에서는 이름을 중복해 클래스, 함수, 변수 등을 선언하면 안 됩니다. 반대로 네임스페이스가 다르면 이름이 같아도 이름 충돌이 없습니다.</p>
<h3 id="외부-모듈"><a href="#외부-모듈" class="headerlink" title="외부 모듈"></a>외부 모듈</h3><p>export로 선언한 모듈을 외부 모듈이라고 합니다. 흔히 말하는 모듈은 외부 모듈을 가리킵니다. 외부 모듈로 선언할 수 있는 대상은 변수, 함수, 클래스 심이어 네임스페이스도 가능합니다. 외부 모듈의 이름 공간은 파일 내로 제한되므로 파일이 다르다면 외부 모듈 이름이 같아도 괜찮습니다. 그런데 export를 생략해 외부 모듈로 선언하지 않으면 전역 스코프의 이름 공간을 공유해 이름 충돌이 발생합니다.</p>
<p>타입스크립트는 모듈 선언과 모듈 호출에 있어 표준인 ES2015 모듈을 지원합니다. 모듈의 선언과 호출을 표준에 맞춰 사용하면 컴파일러가 표준 형식(specification)을 인식할 수 있게 돼 다른 모듈 형식으로 변환할 수 있습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[형식]</span><br><span class="line">tsc --module &lt;모듈 형식&gt; &lt;변환할 파일명&gt;</span><br></pre></td></tr></table></figure>

<p>Module 옵션에서 사용할 수 있는 모듈 형식에는 다음과 같은 것들이 있습니다.</p>
<ul>
<li>commonjs</li>
<li>amd</li>
<li>system</li>
<li>umd</li>
<li>es2015 또는 es6</li>
</ul>
<h2 id="8-2-네임스페이스"><a href="#8-2-네임스페이스" class="headerlink" title="8.2. 네임스페이스"></a>8.2. 네임스페이스</h2><hr>
<h3 id="8-2-1-네임스페이스에-대한-이해"><a href="#8-2-1-네임스페이스에-대한-이해" class="headerlink" title="8.2.1. 네임스페이스에 대한 이해"></a>8.2.1. 네임스페이스에 대한 이해</h3><p>네임스페이스는 하나의 독립된 이름 공간을 만들고 여러 파일에 걸쳐 하나의 이름 공간을 공유할 수 있습니다. 네임스페이스는 <code>namespace</code> 키워드를 이용해 다음과 같이 선언합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Hello &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>네임스페이스와 동일한 역할을 하는 키워드로는 <code>module</code>이 있습니다. namespace와 module은 키워드는 다르지만, 역할과 기능상 차이가 없습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> Hello &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>내부 모듈을 선언할 때는 module 대신에 표준인 namespce로 선언해야 합니다.</p>
<h3 id="namespace와-module의-선언과-컴파일-결과-확인"><a href="#namespace와-module의-선언과-컴파일-결과-확인" class="headerlink" title="namespace와 module의 선언과 컴파일 결과 확인"></a>namespace와 module의 선언과 컴파일 결과 확인</h3><p>namespace와 module은 동작과 기능상의 차이가 없고 심지어 컴파일 결과도 차이가 없습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Hello &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 컴파일된 결과</span></span><br><span class="line"><span class="comment">var Hello;</span></span><br><span class="line"><span class="comment">(function (Hello) &#123;</span></span><br><span class="line"><span class="comment">    function print() &#123;</span></span><br><span class="line"><span class="comment">        console.log('Hello!');</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;)(Hello || (Hello = &#123;&#125;));</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> Hello &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 컴파일된 결과</span></span><br><span class="line"><span class="comment">var Hello;</span></span><br><span class="line"><span class="comment">(function (Hello) &#123;</span></span><br><span class="line"><span class="comment">    function print() &#123;</span></span><br><span class="line"><span class="comment">        console.log('Hello!');</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;)(Hello || (Hello = &#123;&#125;));</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>컴파일된 결과를 보면 namespace와 module은 정확히 똑같은 코드로 변환된다는 것을 확인할 수 있습니다. 내부 모듈은 자바스크립트(ES6)로 컴파일될 때 즉시 실행 함수로 변환됩니다.</p>
<p>이처럼 즉시 실행 함수의 내부는 전역 스코프와 분리된 이름 공간입니다. 즉시 실행 함수로 보낼 인수로 <code>Hello || (Hello = {})</code>을 설정했는데 모듈이 있다면 전달하고, 없다면 Hello에 { }으로 초기화해 전달합니다. 이 방법은 모듈 패턴(module pattern)에서 <strong>‘느슨한 확장(loose augmentation)’</strong>으로 불립니다. 반대로 <code>Hello</code>만 을 인수로 전달한다면 비어있지 않고 반드시 초기화된 모듈이 전달되는데, 이 방법은 <strong>‘단단한 확장(tight augmentation)’</strong>이라고 합니다. 즉시 실행 함수에서 Hello 매개변수는 함수 외부에서 함수 내부의 이름 공간에 접근할 수 있게 하는 역할을 합니다.</p>
<h3 id="8-2-2-한-파일에-여러-네임스페이스-선언하기"><a href="#8-2-2-한-파일에-여러-네임스페이스-선언하기" class="headerlink" title="8.2.2. 한 파일에 여러 네임스페이스 선언하기"></a>8.2.2. 한 파일에 여러 네임스페이스 선언하기</h3><p>네임스페이스는 보통 여러 파일에 걸쳐 하나의 이름 공간을 공유하는데 특정 파일에만 네임스페이스를 선언하거나 특정 파일에 여러 네임스페이스를 함께 선언해도 문제가 되지 않습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> MyInfo1 &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">let</span> name1 = <span class="string">'happy1'</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getName2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MyInfo2.name2;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> MyInfo2 &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">let</span> name2 = <span class="string">'happy2'</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getName1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MyInfo1.name1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(MyInfo1.getName2()); <span class="comment">// happy2</span></span><br><span class="line"><span class="built_in">console</span>.log(MyInfo2.getName1()); <span class="comment">// happy1</span></span><br></pre></td></tr></table></figure>

<p>위 예제에서 MyInfo1과 MyInfo2 네임스페이스는 한 파일에 함께 선언됐습니다. 이때 네임스페이스 간에는 모듈을 서로 호출하고 주고 받을 수 있고, 전역 이름 공간에서 네임스페이스 내부에 선언된 외부 모듈을 호출할 수도 있습니다. 위 코드에서 특이점이 있습니다. MyInfo1 네임스페이스에서 MyInfo2에 선언된 name2 변수 모듈에 접근할 수 있다는 점입니다.</p>
<p>코드가 순차적으로 실행되는 자바스크립트의 특성상 상위에 있는 네임스페이스에서 하위에 선언된 네임스페이스로 접근할 수 없어야 합니다. 그런데 위 코드의 컴파일 결과를 보면 MyInfo1과 MyInfo2 네임스페이스 자바스크립트의 순차적인 실행 특성과 관계없이 자유롭게 호출할 수 있습니다. 이것은 자바스크립트에서 <code>var</code>로 선언된 변수의 호이스팅 특성 때문입니다. 변환 결과(ES6)를 보면 이러한 내용을 확인할 수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyInfo1;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">MyInfo1</span>) </span>&#123;</span><br><span class="line">  MyInfo1.name1 = <span class="string">'happy1'</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getName2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MyInfo2.name2;</span><br><span class="line">  &#125;</span><br><span class="line">  MyInfo1.getName2 = getName2;</span><br><span class="line">&#125;)(MyInfo1 || (MyInfo1 = &#123;&#125;));</span><br><span class="line"><span class="keyword">var</span> MyInfo2;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">MyInfo2</span>) </span>&#123;</span><br><span class="line">  MyInfo2.name2 = <span class="string">'happy2'</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getName1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MyInfo1.name1;</span><br><span class="line">  &#125;</span><br><span class="line">  MyInfo2.getName1 = getName1;</span><br><span class="line">&#125;)(MyInfo2 || (MyInfo2 = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<p>위 예제에서 네임스페이스는 다음 두 변수로 선언됐습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyInfo1;</span><br><span class="line"><span class="keyword">var</span> MyInfo2;</span><br></pre></td></tr></table></figure>

<p>MyInfo1과 MyInfo2는 var 선언자로 선언되어 호이스팅 되므로 실행 순서와 상관없이 즉시 실행 함수 영역 간 호출이 가능합니다. 따라서 즉시 실행 함수인 MyInfo1과 MyInfo2 간에는 변수 MyInfo1과 MyInfo2를 이용해 서로 접근할 수 있습니다.</p>
<h3 id="8-2-3-네임스페이스-하나를-여러-파일에-선언하기"><a href="#8-2-3-네임스페이스-하나를-여러-파일에-선언하기" class="headerlink" title="8.2.3. 네임스페이스 하나를 여러 파일에 선언하기"></a>8.2.3. 네임스페이스 하나를 여러 파일에 선언하기</h3><p>네임스페이스를 이용하면 여러 파일에 걸쳐 하나의 네임스페이스의 이름 공간을 공유할 수 있습니다. 타입스크립트는 네임스페이스를 이용해 논리적 그룹화(logical grouping)를 제공합니다. 논리적 그룹화는 네임스페이스의 이름만 같다면 컴파일 시에 하나의 논리적 영역으로 묶어 컴파일할 수 있게 합니다. 따라서 같은 프로젝트에 속해 있으면서 같은 네임스페이스면 명시적으로 참조하지 않아도 tsc 명령어만으로 타입스크립트 컴파일러가 알아서 네임스페이스 간의 참조 관계를 고려해 컴파일합니다.</p>
<h3 id="참조-경로를-추가하는상황"><a href="#참조-경로를-추가하는상황" class="headerlink" title="참조 경로를 추가하는상황"></a>참조 경로를 추가하는상황</h3><p>tsc 명령어는 프로젝트에 속한 모든 <code>*.ts</code> 파일을 대상으로 프로젝트 단위 컴파일을 수행하므로 네임스페이스를 명시적으로 참조하지 않아도 됩니다. 그런데 프로젝트 단위 컴파일을 수행하지 않고 특정 파일만을 컴파일할 때는 같은 네임스페이스라도 외부에 선언된 네임스페이스를 인식할 수 없습니다.</p>
<p>즉, 프로젝트 단위로 컴파일할 때는 문제가 없지만 외부 참조가 있는 특정 파일만 컴파일할 때는 문제가 됩니다. 이해를 원할하게 하기 위해 먼저 참조할 대상인 <code>car1.ts</code> 파일을 생성하겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Car &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">let</span> auto: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> ICar &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    vender: <span class="built_in">string</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>car1.ts 파일에는 auto 변수와 ICar 인터페이스가 선언돼 있습니다. 이어서 car1.ts 파일을 참조하는 <code>car2.ts</code> 파일을 작성하겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference path="car1.ts" /&gt;</span></span><br><span class="line"><span class="keyword">namespace</span> Car &#123;</span><br><span class="line">  <span class="keyword">let</span> wheels: <span class="built_in">number</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(auto);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> Taxi <span class="keyword">implements</span> ICar &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    vender: <span class="built_in">string</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Car.auto);</span><br><span class="line"><span class="comment">// console.log(Car.wheels);	&lt;- 접근 불가</span></span><br></pre></td></tr></table></figure>

<p>car2.ts 파일의 Car 네임스페이스에 선언된 Taxi 클래스는 car1.ts 파일에 선언된 ICar 인터페이스를 참조하고 있습니다. 같은 네임스페이스(Car)에 선언돼 있으므로 tsc 명령어를 이용해 프로젝트 단위로 컴파일하면 이상 없이 컴파일됩니다. 그런데 프로젝트 단위 컴파일이 아닌 특정 파일(car2.ts)만을 컴파일하면 문제가 있습니다. 따라서 car2.ts 파일 상단처럼 명시적으로 참조 경로(reference path)를 선언해 줘야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference path="car1.ts" /&gt;</span></span><br></pre></td></tr></table></figure>

<p>참조 경로는 트리플 슬래시(triple slash)를 사용해 선언합니다.</p>
<p>car2.ts 파일만 컴파일하면 car2.ts 파일과 참조 경로로 연결된 car1.ts 파일도 함께 컴파일되어 car1.js, car2.js 두 파일이 생성됩니다. 만약 car2.ts 파일만 컴파일 할때 car2.ts 파일에 참조 경로를 삭제하면 다음과 같은 오류가 발생합니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">car2.ts:3:15 - error TS2304: Cannot find name <span class="string">'auto'</span>.</span><br><span class="line">car2.ts:5:25 - error TS2304: Cannot find name <span class="string">'ICar'</span>.</span><br><span class="line">car2.ts:10:17 - error TS2339: Property <span class="string">'auto'</span> does not exist on <span class="built_in">type</span> <span class="string">'typeof Car'</span>.</span><br></pre></td></tr></table></figure>

<p>이제 컴파일된 car2.js 파일을 실행해 보겠습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node car2.js</span><br><span class="line"></span><br><span class="line">undefined</span><br><span class="line">undefined</span><br></pre></td></tr></table></figure>

<p>정상적인 값이 출력되는 것이 아니라 <code>undefined</code>가 출력됩니다. 이는 변환된 car2.js 파일에서 car1.js 파일을 참조할 수 없기 때문입니다. 컴파일 후 참조 경로가 주석처럼 인식돼 제 기능을 할 수 없기 때문입니다. car2.ts의 컴파일 결과(ES5)를 통해서 이와 관련된 내용을 확인할 수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference path="car1.ts" /&gt;</span></span><br><span class="line"><span class="keyword">var</span> Car;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Car</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> wheels;</span><br><span class="line">  <span class="built_in">console</span>.log(Car.auto);</span><br><span class="line">  <span class="keyword">var</span> Taxi = <span class="comment">/** @class */</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Taxi</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> Taxi;</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;)(Car || (Car = &#123;&#125;));</span><br><span class="line"><span class="built_in">console</span>.log(Car.auto);</span><br><span class="line"><span class="comment">// console.log(Car.wheels);</span></span><br></pre></td></tr></table></figure>

<p>참조 경로로 선언했던 “reference path”는 제 기능을 할 수 없게 주석 처리됐습니다. 더군다나 <code>require</code> 함수도 없어서 외부 모듈 파일을 호출하지 못합니다. 올바른 결과를 확인하려면 두 파일을 합쳐 컴파일해야 합니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tsc --out out.js car2.ts</span><br></pre></td></tr></table></figure>

<p>위 명령어는 car2.ts 파일과 참조하는 car1.ts 파일의 컴파일 결과를 합쳐 out.js 파일을 생성합니다. 컴파일 결과가 한 파일에 존재하므로 참조 경로나 require 함수가 없더라도 결과(ES5)가 정상적으로 출력됩니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Car;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Car</span>) </span>&#123;</span><br><span class="line">  Car.auto = <span class="literal">false</span>;</span><br><span class="line">&#125;)(Car || (Car = &#123;&#125;));</span><br><span class="line"><span class="comment">/// &lt;reference path="car1.ts" /&gt;</span></span><br><span class="line"><span class="keyword">var</span> Car;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Car</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> wheels;</span><br><span class="line">  <span class="built_in">console</span>.log(Car.auto);</span><br><span class="line">  <span class="keyword">var</span> Taxi = <span class="comment">/** @class */</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Taxi</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> Taxi;</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;)(Car || (Car = &#123;&#125;));</span><br><span class="line"><span class="built_in">console</span>.log(Car.auto);</span><br><span class="line"><span class="comment">// console.log(Car.wheels);</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node out.js</span><br><span class="line"></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>만약 컴파일 후에도 결과가 제대로 표시되게 하려면 네임스페이스를 모듈로 선언하고 import 문을 추가해 줘야 합니다.</p>
<h3 id="8-2-4-네임스페이스-모듈"><a href="#8-2-4-네임스페이스-모듈" class="headerlink" title="8.2.4. 네임스페이스 모듈"></a>8.2.4. 네임스페이스 모듈</h3><p>네임스페이스는 export를 이용해 모듈로 선언할 수 있습니다. 모듈로 선언된 네임스페이스는 import 문을 이용해 JS로 컴파일된 뒤에도 명시적으로 모듈 호출(import 문, require 함수 등)을 할 수 있습니다.</p>
<p>위에서 작성했던 car1.ts 파일과 car2.ts 파일의 네임스페이스를 모듈로 선언해보겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">namespace</span> Car &#123;</span><br><span class="line">  <span class="comment">// export 추가하여 모듈로 선언</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">let</span> auto: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> ICar &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    vender: <span class="built_in">string</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> ns <span class="keyword">from</span> <span class="string">'./car1'</span>; <span class="comment">// 네임스페이스 모듈 호출</span></span><br><span class="line"><span class="keyword">namespace</span> Car &#123;</span><br><span class="line">  <span class="keyword">let</span> wheels: <span class="built_in">number</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(ns.Car.auto);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> Taxi <span class="keyword">implements</span> ns.Car.ICar &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    vender: <span class="built_in">string</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(ns.Car.auto);</span><br></pre></td></tr></table></figure>

<p>위 코드와 같이 구성하면 car2.ts 파일이 car1.ts의 모듈을 명시적으로 호출하게 되고 컴파일 시에도 모듈 호출은 유지됩니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tsc car2.ts</span><br></pre></td></tr></table></figure>

<p>tsc 컴파일 시 <code>--module</code> 모듈 옵션을 설정하지 않았으므로 tsconfig.json 설정에 별다른 모듈 설정이 없다면 기본으로 <code>CommonJS</code> 모듈 형식으로 변환됩니다. 위 명령어를 입력하면 ES5 표준인 car1.js, car2.js 두 파일이 생성됩니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line">exports.__esModule = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> Car;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Car</span>) </span>&#123;</span><br><span class="line">  Car.auto = <span class="literal">false</span>;</span><br><span class="line">&#125;)((Car = exports.Car || (exports.Car = &#123;&#125;)));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line">exports.__esModule = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> ns = <span class="built_in">require</span>(<span class="string">'./car1'</span>);</span><br><span class="line"><span class="keyword">var</span> Car;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Car</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> wheels;</span><br><span class="line">  <span class="built_in">console</span>.log(ns.Car.auto);</span><br><span class="line">  <span class="keyword">var</span> Taxi = <span class="comment">/** @class */</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Taxi</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> Taxi;</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;)(Car || (Car = &#123;&#125;));</span><br><span class="line"><span class="built_in">console</span>.log(ns.Car.auto);</span><br></pre></td></tr></table></figure>

<p>car2.js 파일을 보면 네임스페이스 모듈을 호출하는 부분이 CommonJS 형식에 맞게 require 함수를 사용해 명시적으로 모듈을 호출하고 있음을 확인할 수 있습니다. car2.js 파일을 node 명령어로 실행하면 다음과 같은 정상적인 결과를 얻을 수 있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node car2.js</span><br><span class="line"></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="8-2-5-네임스페이스의-이름-확장"><a href="#8-2-5-네임스페이스의-이름-확장" class="headerlink" title="8.2.5. 네임스페이스의 이름 확장"></a>8.2.5. 네임스페이스의 이름 확장</h3><p>네임스페이스의 이름은 알파벳 소문자와 대문자를 사용해 다음처럼 선언합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Animal &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>네임스페이스 이름은 예외로 점(.)을 허용합니다. 점(.)을 이용하면 네임스페이스 간의 이름 계층을 만드는 효과가 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Animal.Land &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>Animal 네임스페이스와 Animal.Land 네임스페이스는 서로 다른 이름 공간입니다. 이름 공간은 다르지만 논리적인 이름 순서상 상위 이름은 앞에 선언돼야 하고 하위 이름은 상대적으로 뒤에 선언돼야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Animal &#123; ... &#125;</span><br><span class="line"><span class="keyword">namespace</span> Animal.Pet &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>한 파일 내에서 여러 네임스페이스가 선언돼 있을 때 네임스페이스의 선언 위치에 상관없이 서로 참조할 수 있기 때문에 순서를 바꿔 선언해도 문제가 되지 않습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Animal.Land &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'육상 동물이 달립니다.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Animal &#123;</span><br><span class="line">  <span class="comment">// run();	&lt;- 다른 이름 영역이므로 사용할 수  없음</span></span><br><span class="line">  Animal.Land.run();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// 육상 동물이 달립니다.</span></span><br></pre></td></tr></table></figure>

<p>위 코드에서 주목할 점은 위 네임스페이스의 선언 순서는 논리적으로 하위 이름(Animal.Land)이 상위에 위치해 있고 논리적으로 상위 이름(Animal)이 하위에 위치해 있다는 것입니다. 네임스페이스를 선언할 때는 논리적으로 상위 이름에서 하위 이름순으로 배치하는 것이 자연스럽습니다. 이러한 방식으로 네임스페이스를 논리적인 순서로 선언해 보겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Animal &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'동물이 달립니다.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Animal.Land.run();</span></span><br><span class="line">  <span class="comment">// 하위 네임스페이스 요소는 호출 불가</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Animal.Land &#123;</span><br><span class="line">  Animal.run(); <span class="comment">// 상위 네임스페이스 요소 호출</span></span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'육상 동물이 달립니다.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Animal.Land.Pet &#123;</span><br><span class="line">  Animal.Land.run(); <span class="comment">// 상위 네임스페이스 요소 호출</span></span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'애완 동물이 달립니다.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 고양이 클래스</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">class</span> Cat &#123;</span><br><span class="line">    run() &#123;</span><br><span class="line">      Animal.Land.Pet.run();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> cat = <span class="keyword">new</span> Animal.Land.Pet.Cat();</span><br><span class="line">cat.run();</span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// 동물이 달립니다.</span></span><br><span class="line"><span class="comment">// 육상 동물이 달립니다.</span></span><br><span class="line"><span class="comment">// 애완 동물이 달립니다.</span></span><br></pre></td></tr></table></figure>

<p>위 코드에서 한 단계 나아가 생각해볼 점은 네임스페이스가 위 예제처럼 계층적으로 선언했고 <code>export</code> 키워드를 추가해 모듈로 선언할 때입니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">namespace</span> Animal &#123; ... &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">namespace</span> Animal.Land &#123; ... &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">namespace</span> Animal.Land.Pet &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>위와 같이 선언된 네임스페이스들을 임포트라혀면 네임스페이스의 최상위 이름만을 이용해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Animal &#125; <span class="keyword">from</span> <span class="string">'./namespace-comma'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8-2-6-브라우저에서-네임스페이스의-모듈-호출"><a href="#8-2-6-브라우저에서-네임스페이스의-모듈-호출" class="headerlink" title="8.2.6. 브라우저에서 네임스페이스의 모듈 호출"></a>8.2.6. 브라우저에서 네임스페이스의 모듈 호출</h3><h2 id="8-3-모듈의-이해와-사용"><a href="#8-3-모듈의-이해와-사용" class="headerlink" title="8.3. 모듈의 이해와 사용"></a>8.3. 모듈의 이해와 사용</h2><hr>
<p>타입스크립트는 ES2015 모듈의 선언과 호출과 관련한 스타일을 지원하는데 선언 방법이 꽤 다양합니다. 이번 절에는 모듈을 선언하고 호출하는 여러 방법에 대해 알아 보겠습니다.</p>
<h3 id="8-3-1-모듈-선언과-모듈-임포트"><a href="#8-3-1-모듈-선언과-모듈-임포트" class="headerlink" title="8.3.1. 모듈 선언과 모듈 임포트"></a>8.3.1. 모듈 선언과 모듈 임포트</h3><p>타입스크립트 1.5부터는 ES2015 모듈 시스템을 지원합니다. ES2015 모듈 시스템은 export나 import 제한자를 통해 모듈을 선언하고 호출할 수 있습니다. 모듈은 <code>export</code>로 선언해야 외부로 노출됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> Information &#123; ... &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>위와 같이 export 키워드와 모듈 이름을 함께 선언해 모듈을 노출하는 방식을 <strong>명명된 내보내기(named exports)</strong>라고 합니다. 외부로 노출된 모듈은 <code>import</code> 키워드를 이용해 가져올 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m <span class="keyword">from</span> <span class="string">'./module'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; add, sub &#125; <span class="keyword">from</span> <span class="string">'./calc'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-2-모듈을-개별적으로-노출하고-사용하기"><a href="#8-3-2-모듈을-개별적으로-노출하고-사용하기" class="headerlink" title="8.3.2. 모듈을 개별적으로 노출하고 사용하기"></a>8.3.2. 모듈을 개별적으로 노출하고 사용하기</h3><p>함수나 인터페이스와 같은 단위별로 노출하려면 개별 노출 형식을 사용합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ICard &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">saveInfo</span>(<span class="params">car: ICard, name: <span class="built_in">string</span></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// load.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; ICard, saveInfo &#125; <span class="keyword">from</span> <span class="string">'./export'</span>;</span><br><span class="line"><span class="keyword">let</span> card: ICard = &#123;&#125;;</span><br><span class="line">saveInfo(card, <span class="string">'happy'</span>);</span><br></pre></td></tr></table></figure>

<p>앞의 두 예제의 export와 import 문은 ES2015 모듈 형식을 사용했으므로 ES6(ES2015)로 컴파일한 결과에서는 export 나 import문은 그대로 유지됩니다. 다른 점은 인터페이스는 컴파일 과정에서 유효한 타입이므로 컴파일 후에는 제거됩니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">saveInfo</span>(<span class="params">car, name</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// load.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; saveInfo &#125; <span class="keyword">from</span> <span class="string">'./export'</span>;</span><br><span class="line"><span class="keyword">let</span> card = &#123;&#125;;</span><br><span class="line">saveInfo(card, <span class="string">'happy'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="8-3-3-여러-모듈을-함께-export하기"><a href="#8-3-3-여러-모듈을-함께-export하기" class="headerlink" title="8.3.3 여러 모듈을 함께 export하기"></a>8.3.3 여러 모듈을 함께 export하기</h3><p>모듈을 개별적으로 선언해도 되지만 모듈을 선언할 때마다 export 키워드를 붙이건 불편합니다. 이러한 점을 개선하기 위해 여러 모듈을 함께 export해주면 편리합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ver = <span class="string">'1.0'</span>;</span><br><span class="line"><span class="keyword">let</span> author: <span class="built_in">string</span> = <span class="string">'happy'</span>;</span><br><span class="line"><span class="keyword">let</span> extensions = [<span class="string">'jpg'</span>, <span class="string">'bmp'</span>, <span class="string">'png'</span>];</span><br><span class="line"><span class="keyword">let</span> display = <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'hello wolrd'</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; ver, author, extensions, display &#125;;</span><br></pre></td></tr></table></figure>

<p>다음과 같은 형태로 여러 변수와 함께 외부로 export할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export-variables.ts</span></span><br><span class="line"><span class="keyword">export</span> &#123; ver, author, extensions, display &#125;;</span><br></pre></td></tr></table></figure>

<p>export된 변수는 다음과 같이 import해 사용할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ver, author, extensions, display &#125; <span class="keyword">from</span> <span class="string">'./export-variables'</span>;</span><br></pre></td></tr></table></figure>

<p>만약 모듈로 선언할 대상이 인터페이스를 사용하는 함수일 때는 함수가 인터페이스와 의존 관계가 있으므로 함수와 인터페이스를 함께 export해야 합니다. 예를 들어 IProfile이라는 인터페이스가 선언돼 있고 saveProfile이라는 함수가 IProfile 인터페이스를 매개변수의 타입으로 사용하고 있다고 해 보겠습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IProfile &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveName</span>(<span class="params">profile: IProfile, name: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 구현</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; IProfile, saveName <span class="keyword">as</span> save &#125;;</span><br></pre></td></tr></table></figure>

<p>export할 때 모듈의 이름을 변경하려면 <code>as</code> 키워드를 이용합니다.</p>
<h3 id="8-3-4-모듈을-재노출해-사용하기"><a href="#8-3-4-모듈을-재노출해-사용하기" class="headerlink" title="8.3.4. 모듈을 재노출해 사용하기"></a>8.3.4. 모듈을 재노출해 사용하기</h3><h3 id="가져온-모든-모듈을-재노출"><a href="#가져온-모든-모듈을-재노출" class="headerlink" title="가져온 모든 모듈을 재노출"></a>가져온 모든 모듈을 재노출</h3><p>만약 재노출할 모둘이 많아 구체적인 이름을 열거하기가 불편할 때는 “export _ from …” 문법을 이용합니다. 이 문법에서 <code>_</code>은 모든 모듈을 의미합니다. 모듈 파일을 재노출할 때 모든 외부 모듈을 의미하는 *에 대한 별칭이 없으므로 임포트할 때는 as 키워드를 이용해 별칭을 추가해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> m <span class="keyword">from</span> <span class="string">'./modules'</span>;</span><br><span class="line">m.setAge(<span class="number">20</span>);</span><br><span class="line">m.setName(<span class="string">'happy'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="네임스페이스로-감싸서-노출하기"><a href="#네임스페이스로-감싸서-노출하기" class="headerlink" title="네임스페이스로 감싸서 노출하기"></a>네임스페이스로 감싸서 노출하기</h3><p>네임스페이스는 독립된 이름 공간이며 export를 이용해 모듈로 선언할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">namespace</span> CarInfo &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>export로 선언하면 다른 파일에서 임포트할 수 있는 모듈이 됩니다. 네임스페이스는 이름 공간을 정의해 하위에 여러 모듈을 포함할 수 있는 특성이 있습니다. 이 때문에 네임스페이스를 기존에 흩어졌던 모듈을 다시 용도에 맞게 감싸서 재노출할 용도로 사용할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my-car.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> MyCar &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; Engine <span class="keyword">as</span> SuperEngine &#125; <span class="keyword">from</span> <span class="string">'./engine'</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// engine.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Engine &#123;</span><br><span class="line">  construtor(<span class="keyword">public</span> name: <span class="built_in">string</span>) &#123;&#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>네임스페이스는 외부에 노출할 모듈을 모아 라이브러리 형태로 정의할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// car-info.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; MyCar <span class="keyword">as</span> SuperCar, SuperEngine &#125; <span class="keyword">from</span> <span class="string">'./my-car'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">namespace</span> CarInfo &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">let</span> car = SuperCar;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">let</span> engine = SuperEngine;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 예제에서 여러 하위 모듈을 재구성하기 위해 CarInfo 네임스페이스를 정의했습니다. 네임스페이스는 복잡한 하위 모듈 구성을 하나의 이름 영역 안에 재구성해 주는 역할을 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CarInfo &#125; <span class="keyword">from</span> <span class="string">'./car-info-module'</span>;</span><br><span class="line"></span><br><span class="line">CarInfo.Hello();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car = <span class="keyword">new</span> CarInfo.car(<span class="string">'My Car'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(car.name);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> engine = <span class="keyword">new</span> CarInfo.engine(<span class="string">'My Engine'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(engine.name);</span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// hello</span></span><br><span class="line"><span class="comment">// My Car</span></span><br><span class="line"><span class="comment">// My Engine</span></span><br></pre></td></tr></table></figure>

<h3 id="8-3-5-디폴트-모듈의-이해와-사용법"><a href="#8-3-5-디폴트-모듈의-이해와-사용법" class="headerlink" title="8.3.5. 디폴트 모듈의 이해와 사용법"></a>8.3.5. 디폴트 모듈의 이해와 사용법</h3><h3 id="export-equals-문과-import-equals-문"><a href="#export-equals-문과-import-equals-문" class="headerlink" title="export-equals 문과 import-equals 문"></a>export-equals 문과 import-equals 문</h3><p>타입스크립트 1.5가 발표되기 전에는 모듈을 선언할 때 export-equals 문으로 할당(assignment)했고, 모듈을 호출할 때는 import-equals 문으로 임포트했습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> = validator;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Validator = <span class="built_in">require</span>(<span class="string">'validator'</span>);</span><br></pre></td></tr></table></figure>

<p>import-equals 문이나 export-equals 문은 CommonJS와 AMD 스타일 모듈과 호환이 가능합니다.</p>
<h3 id="디폴트-모듈-선언"><a href="#디폴트-모듈-선언" class="headerlink" title="디폴트 모듈 선언"></a>디폴트 모듈 선언</h3><p>타입스크립트 1.5에서는 import-equals 문과 export-equals 문 대신 다른 형태로 모듈을 선언하거나 임포트할 수 있습니다. 먼저 export-equals 할당은 <code>default</code> 키워드를 이용한 방식으로 바꼈습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  title: <span class="string">'hello world'</span>,</span><br><span class="line">  length: <span class="number">11</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>위와 같이 default로 선언된 모듈은 <strong>파일마다 하나씩만 선언</strong>돼야 합니다. 위 선언은 여러 형태의 변형이 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  title: <span class="string">'hello world'</span>,</span><br><span class="line">  length: <span class="number">11</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123; a <span class="keyword">as</span> <span class="keyword">default</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 익명 함수</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">x: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기명 함수</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 클래스</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Hello &#123;</span><br><span class="line">  sayHello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>import-equals 문은 require( )를 쓰는 대신에 ES6의 <code>import</code> 형식으로 가져올 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Validator <span class="keyword">from</span> <span class="string">'./validator'</span>;</span><br></pre></td></tr></table></figure>

<p>다음과 같이 작성할 수도 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> Validator &#125; <span class="keyword">from</span> <span class="string">'./validator'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="디폴트-모듈과-명명된-모듈을-함께-가져오기"><a href="#디폴트-모듈과-명명된-모듈을-함께-가져오기" class="headerlink" title="디폴트 모듈과 명명된 모듈을 함께 가져오기"></a>디폴트 모듈과 명명된 모듈을 함께 가져오기</h3><p>디폴트 모듈(default module)은 default 키워드를 사용해서 선언합니다. 디폴트 모듈의 특성은 모듈 파일에 최대 1개까지만 선언할 수 있다는 것입니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// default.ts</span></span><br><span class="line"><span class="keyword">const</span> p = &#123;</span><br><span class="line">  name: <span class="string">'happy'</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> h: <span class="built_in">string</span> = <span class="string">'hell ts!'</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; p <span class="keyword">as</span> <span class="keyword">default</span>, h <span class="keyword">as</span> hello &#125;;</span><br></pre></td></tr></table></figure>

<p>위 예제와 같이 export하는 디폴드 모듈 p와 다른 모듈을 함께 export할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; p <span class="keyword">as</span> <span class="keyword">default</span>, h <span class="keyword">as</span> <span class="keyword">default</span> &#125;; <span class="comment">// Error: Duplicate identifier 'default'</span></span><br></pre></td></tr></table></figure>

<p>유의할 점은 디폴트 모듈의 경우에는 일반 모듈과는 달리 { }에 선언하면 안 되고 { }가 없이 선언해야 합니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> p, &#123; hello &#125; <span class="keyword">from</span> <span class="string">'./default'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(hello, p);</span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// hello ts! &#123; name: 'happy', age: 30 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="디폴트-모듈로-타입과-모듈을-함께-노출"><a href="#디폴트-모듈로-타입과-모듈을-함께-노출" class="headerlink" title="디폴트 모듈로 타입과 모듈을 함께 노출"></a>디폴트 모듈로 타입과 모듈을 함께 노출</h3><p>디폴트 모듈로 사용할 HelloMessage 함수의 반환 타입으로 Message가 선언돼 있다고 해봅시다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HelloMessage</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="title">Message</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>위와 같이 선언되면 어쩔 수 없이 HelloMessage와 Message를 동시에 노출할 수 밖에 없습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; HelloMessage <span class="keyword">as</span> <span class="keyword">default</span>, Message &#125;;</span><br></pre></td></tr></table></figure>

<p>만약 HelloMessage만을 export하되 타입을 함께 노출하려면 어떻게 해야 할까요? 방법은 디폴트 모듈로 export할 함수명과 인터페이스 타입명을 일치시키 선언하면 됩니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.ts</span></span><br><span class="line"><span class="keyword">interface</span> HelloMessage &#123;</span><br><span class="line">  first: <span class="built_in">string</span>;</span><br><span class="line">  second: stirng;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HelloMessage</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="title">HelloMessage</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> message: HelloMessage = &#123; first: <span class="string">'hello'</span>, second: name &#125;;</span><br><span class="line">  <span class="keyword">return</span> message;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> HelloMessage;</span><br></pre></td></tr></table></figure>

<p>위와 같이 export된 디폴트 모듈을 임포트하면 같은 이름을 이용해 함수 또는 인터페이스 타입으로 사용할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hello <span class="keyword">from</span> <span class="string">'./export'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> helloMessage: hello = hello(<span class="string">'hello'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(hello(<span class="string">'hello'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(helloMessage);</span><br><span class="line"><span class="comment">// [실행 결과]</span></span><br><span class="line"><span class="comment">// &#123; first: 'hello', second: 'hello' &#125;</span></span><br><span class="line"><span class="comment">// &#123; first: 'hello', second: 'hello' &#125;</span></span><br></pre></td></tr></table></figure>

<p>임포트한 hello 디폴트 모듈은 <code>hello(&quot;hello&quot;)</code>와 같은 함수로 사용될 수 있고 <code>helloMessage: hello</code>와 같이 타입으로 사용될 수 있습니다. 이런 것이 가능한 이유는 타입스크립트 컴파일러가 hello가 선언된 위치에 따라 함수인지 타입인지 구분해 타입 검사를 하기 때문입니다.</p>
<h2 id="8-4-모듈-시스템"><a href="#8-4-모듈-시스템" class="headerlink" title="8.4. 모듈 시스템"></a>8.4. 모듈 시스템</h2><hr>
<h3 id="8-4-1-모듈-로더와-모듈-형식"><a href="#8-4-1-모듈-로더와-모듈-형식" class="headerlink" title="8.4.1. 모듈 로더와 모듈 형식"></a>8.4.1. 모듈 로더와 모듈 형식</h3><p>모둘 로더(module loader)는 모듈 파일에 선언된 모듈을 실행할 수 있습니다. 브라우저에서 동작하는 모듈 로더는 느린 로딩(lazy loading)의 방식으로 모듈 파일을 가져와 모듈을 실행합니다.</p>
<p>타입스크립트에서는 모듈을 정의하거나 호출할 때 ES2015 모듈을 이용합니다. 타입스크립트는 자바스크립트로 컴파일돼 실행됩니다. 이때 ES2015 모듈이 표준이지만 더 많은 브라우저에서 지원하게 하고자 ES5 표준으로 컴파일하고 ES2015 모듈은 모듈 로더를 통해 호출할 수 있습니다.</p>
<p>모듈 형식(module format)은 모듈 정의에 관한 표준 명세(specification)에 해당합니다. 모듈 로더가 특정 모듈 형식을 지원하려면 모듈 로더가 지원하는 모듈 형식에 맞춰 컴파일해야 합니다.</p>
<p>최근에 나온 모듈 로더는 대체로 CommonJS와 AMD 모듈 형식을 기본으로 지원합니다. 타입스크립트 컴파일러는 특정 모듈 형식으로 컴파일하도록 여러 모듈 형식을 지원합니다.</p>
<ul>
<li>commonjs</li>
<li>amd</li>
<li>system</li>
<li>umd</li>
<li>es2015 (import/exports로 사용 형식이 같음)</li>
</ul>
<p>이들 중 타입스크립트는 ES2015 모듈 형식을 기본으로 사용합니다.</p>
<h3 id="8-4-2-모듈-형식에-맞춰-컴파일하기"><a href="#8-4-2-모듈-형식에-맞춰-컴파일하기" class="headerlink" title="8.4.2. 모듈 형식에 맞춰 컴파일하기"></a>8.4.2. 모듈 형식에 맞춰 컴파일하기</h3><h3 id="모듈-형식에-따른-컴파일-방법"><a href="#모듈-형식에-따른-컴파일-방법" class="headerlink" title="모듈 형식에 따른 컴파일 방법"></a>모듈 형식에 따른 컴파일 방법</h3><p>프로젝트 기반으로 target을 ES5로 지정해 컴파일하려면,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tsc -t es5 -m &lt;모듈 형식&gt;</span><br></pre></td></tr></table></figure>

<p>특정 모듈 파일만을 컴파일하려면,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tsc --module &lt;모듈 형식&gt; &lt;변환할 모듈 파일 이름&gt;</span><br></pre></td></tr></table></figure>

<p>이렇게 <code>--module</code> 옵션에 사용할 수 있는 모듈 형식의 설정값은 다음과 같습니다.</p>
<ul>
<li>none</li>
<li>commjs</li>
<li>amd</li>
<li>system</li>
<li>um</li>
<li>es6 또는 es2015</li>
</ul>
<p>설정값 중에 <code>none</code>은 ES2015 모듈 형식과 CommonJS 모듈 형식을 사용하지 않을 때 설정합니다.</p>
<p>만약 –module 옵션 사용 시 모듈 형식을 지정하지 않으면 target 값에 따라 다르게 기본값이 정해집니다. 예를 들어 target 옵션을 “–target es2015”와 같이 설정했다면 –module 옵션은 <strong>ES2015 모듈 형식을 기본</strong>으로 두지만 그렇지 않으면 <strong>CommonJS 모듈 형식을 기본값</strong>으로 둡니다.</p>
<h3 id="–module-옵션에-대한-부가적인-설명"><a href="#–module-옵션에-대한-부가적인-설명" class="headerlink" title="–module 옵션에 대한 부가적인 설명"></a>–module 옵션에 대한 부가적인 설명</h3><p>명령어로 컴파일할 때 <code>--out</code> 옵션을 사용하면 입력 파일을 받아 단일 파일로 생성할 수 있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[형식]</span><br><span class="line">$ tsc --out &lt;출력할 js파일명&gt; &lt;변환할 ts파일명&gt; --module &lt;모듈 형식&gt;</span><br></pre></td></tr></table></figure>

<p>–out 옵션과 –module 옵션을 사용할 때 허용하는 설정값은 amd, system 두 가지뿐입니다. –out 옵션은 단일 파일로 컴파일해 결과를 생성해 내는 옵션이므로 단일 파일에 적합하지 않은 나머지 모듈 형식은 허용되지 않습니다.</p>
<p>만약 소스 맵이 필요하다면 <code>-sourcemap</code> 옵션을 추가합니다.</p>
<h2 id="8-5-각종-모듈-형식에-대한-소개"><a href="#8-5-각종-모듈-형식에-대한-소개" class="headerlink" title="8.5. 각종 모듈 형식에 대한 소개"></a>8.5. 각종 모듈 형식에 대한 소개</h2><hr>
<h3 id="8-5-1-ES2015"><a href="#8-5-1-ES2015" class="headerlink" title="8.5.1. ES2015"></a>8.5.1. ES2015</h3><p>타입스크립트는 ES2015 모듈 형식을 기본으로 채택해 모듈을 선언하고 모듈을 호출합니다.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/04/28/typescript-interface/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/28/typescript-interface/" class="post-title-link" itemprop="url">타입스크립트 스터디 4주차</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-28 19:30:00 / Modified: 20:23:55" itemprop="dateCreated datePublished" datetime="2020-04-28T19:30:00+09:00">2020-04-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/28/typescript-interface/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/28/typescript-interface/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="인터페이스"><a href="#인터페이스" class="headerlink" title="인터페이스"></a>인터페이스</h1><h2 id="인터페이스-소개"><a href="#인터페이스-소개" class="headerlink" title="인터페이스 소개"></a>인터페이스 소개</h2><p>인터페이스는 자바스크립트(ES6)가 지원하지 않는 타입스크립트만의 특징입니다. 인터페이스는 타입이며 컴파일 후에는 사라집니다. 인터페이스의 기본적인 선언 형태는 다음과 같습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [형식]</span></span><br><span class="line"><span class="keyword">interface</span> Car &#123;</span><br><span class="line">  speed: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="인터페이스의-역할과-컴파일-결과-분석"><a href="#인터페이스의-역할과-컴파일-결과-분석" class="headerlink" title="인터페이스의 역할과 컴파일 결과 분석"></a>인터페이스의 역할과 컴파일 결과 분석</h2><p>자바스크립트의 객체는 구조를 고정할 수 없고, 쉽게 변화(flexible)하는 특성이 있습니다. 객체는 유지보수와 확장 그리고 안정성으로 고려해 선언과 동시에 고정할 필요가 있습니다. 인터페이스를 이용하면 객체의 구조를 고정할 수 있습니다. 여기서 알아둘 점은 인터페이스는 컴파일 과정에서 타입 검사의 용도로 사용하고 컴파일 후에는 제거됩니다. 따라서 <code>typeof</code>을 이용해 인터페이스의 타입을 조사할 수 없습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ICar &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> MyCar &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mCar: ICar = &#123; name: <span class="string">'car'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mCar); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> MyCar); <span class="comment">// function</span></span><br><span class="line"><span class="comment">// console.log(typeof ICar); // Error: 'ICar' only refers to a type, but is being used as a value here.</span></span><br></pre></td></tr></table></figure>

<p>타입스크립트에서는 인터페이스가 타입으로 취급되지만, 자바스크립트로 변환되고 나면 더는 존재하지 않으므로 <code>typeof ICar</code> 같은 타입 검사는 유효하지 않습니다.</p>
<p>ES6로 컴파일된 결과를 살펴보면 인터페이스가 사라졌음을 알 수 있습니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCar</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> mCar = &#123; <span class="attr">name</span>: <span class="string">'car'</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mCar); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> MyCar); <span class="comment">// function</span></span><br></pre></td></tr></table></figure>

<p>결론적으로 인터페이스는 타입스크립트를 컴파일할 때 클래스와 객체의 타입 안전성을 확보 하기 위한 용도로 사용되며 ES5, ES6로 컴파일 후에 사라집니다.</p>
<h2 id="덕-타이핑-Duck-Typing"><a href="#덕-타이핑-Duck-Typing" class="headerlink" title="덕 타이핑 (Duck Typing)"></a>덕 타이핑 (Duck Typing)</h2><p>인터페이스를 구현하였다는 것만이 타입 체크를 통과할 수 있는 유일한 방법이 아닙니다. 타입 체크에서 가장 중요한 것은 실제로 값을 가지고 있는 것 입니다. 아래의 예를 살펴 보겠습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IDuck &#123;</span><br><span class="line">  quack(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Duck <span class="keyword">implements</span> IDuck &#123;</span><br><span class="line">  quack() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'꽥!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">  quack() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'나도 꽥!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeSomeNoiseWith</span>(<span class="params">duck: IDuck</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  duck.quack();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">makeSomeNoiseWith(<span class="keyword">new</span> Duck()); <span class="comment">// 꽥!</span></span><br><span class="line">makeSomeNoiseWith(<span class="keyword">new</span> Person()); <span class="comment">// 나도 꽥!</span></span><br></pre></td></tr></table></figure>

<p>덕 타이핑은 어떤 객체가 특정 인터페이스에서 명시하는 메소드를 가지고 있다면 해당 객체가 그 인터페이스를 구현한 것으로 보는 것이다. 즉, <code>Duck</code> 클래스뿐 아니라 <code>Person</code> 클래스 또한 <code>makeSomeNoiseWith</code>의 인자로 넘겨도 문제가 없습니다. 이것이 바로 덕 타이핑의 효과라고 할 수 있습니다.</p>
<p><code>Person</code> 클래스에서 <code>quack</code> 메소드를 제거하면 컴파일 에러가 발생합니다. 이를 통해 개발자는 런타임에 메소드 검사를 하지 않고도 런타임 에러를 방지할 수 있습니다.</p>
<h2 id="인터페이스-상속"><a href="#인터페이스-상속" class="headerlink" title="인터페이스 상속"></a>인터페이스 상속</h2><p>인터페이스는 <code>extends</code> 키워드를 사용하여 인터페이스 또는 클래스를 상속받을 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Pserson &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Student <span class="keyword">extends</span> Person &#123;</span><br><span class="line">  grade: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> student: Student = &#123;</span><br><span class="line">  name: <span class="string">'An'</span>,</span><br><span class="line">  age: <span class="number">29</span>,</span><br><span class="line">  grade: <span class="number">5</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>복수의 인터페이스를 상속받을 수 도 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Developer &#123;</span><br><span class="line">  skills: <span class="built_in">string</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> FrontDeveloper <span class="keyword">extends</span> Person, Developer &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reactDeveloper: FrontDeveloper = &#123;</span><br><span class="line">  name: <span class="string">'An'</span>,</span><br><span class="line">  age: <span class="number">29</span>,</span><br><span class="line">  skills: [<span class="string">'Javascript'</span>, <span class="string">'React'</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>인터페이스는 인터페이스 뿐만 아니라 클래스도 상속받을 수 있습니다. 단, 클래스의 모든 멤버(public, protected, private)가 상속되지만 구현까지 상속하지는 않습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span>, <span class="keyword">public</span> age: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Developer <span class="keyword">extends</span> Person &#123;</span><br><span class="line">  skills: <span class="built_in">string</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reactDeveloper: Developer = &#123;</span><br><span class="line">  name: <span class="string">'An'</span>,</span><br><span class="line">  age: <span class="number">29</span>,</span><br><span class="line">  skills: [<span class="string">'javascript'</span>, <span class="string">'react'</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Optional-Properties"><a href="#Optional-Properties" class="headerlink" title="Optional Properties"></a>Optional Properties</h2><p>인터페이스의 프로퍼티는 반드시 구현되어야 합니다. 하지만 인터페이스의 프로퍼티가 선택적으로 필요한 경우가 있을 수 있습니다. 선택적 프로퍼티(Optional Property)는 프로퍼티명 뒤에 간단히 <code>?</code>를 붙여 사용합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> UserInfo &#123;</span><br><span class="line">  email: <span class="built_in">string</span>;</span><br><span class="line">  username: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line">  address?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userInfo: UserInfo = &#123;</span><br><span class="line">  email: <span class="string">'test@naver.com'</span>,</span><br><span class="line">  username: <span class="string">'hyeongyu'</span>,</span><br><span class="line">  age: <span class="number">28</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(userInfo);</span><br></pre></td></tr></table></figure>

<p>위 코드에서 알 수 있듯이, 인터페이스를 구현하는 클래스에서는 선택적 프로퍼티를 가지고 있지 않더라도 에러가 발생하지 않습니다.</p>
<h2 id="Readonly-Properties"><a href="#Readonly-Properties" class="headerlink" title="Readonly Properties"></a>Readonly Properties</h2><p>읽기전용 프로퍼티를 선언할 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Point &#123;</span><br><span class="line">  readonly x: <span class="built_in">number</span>;</span><br><span class="line">  readonly y: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1: Point = &#123; x: <span class="number">10</span>, y: <span class="number">20</span> &#125;;</span><br><span class="line">p1.x = <span class="number">5</span>; <span class="comment">// Error: Cannot assign to 'x' because it is a read-only property.ts(2540)</span></span><br></pre></td></tr></table></figure>

<h2 id="Readonly-Array"><a href="#Readonly-Array" class="headerlink" title="Readonly Array"></a>Readonly Array</h2><p>읽기 전용 배열을 선언할 수 도 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> ro: ReadonlyArray&lt;<span class="built_in">number</span>&gt; = a;</span><br><span class="line">ro[<span class="number">0</span>] = <span class="number">12</span>; <span class="comment">// Error: Index signature in type 'readonly number[]' only permits reading.</span></span><br><span class="line">ro.push(<span class="number">5</span>); <span class="comment">// Error: Property 'push' does not exist on type 'readonly number[]'.</span></span><br><span class="line">ro.length = <span class="number">100</span>; <span class="comment">// Error: annot assign to 'length' because it is a read-only property.</span></span><br><span class="line">a = ro; <span class="comment">// Error: he type 'readonly number[]' is 'readonly' and cannot be assigned to the mutable type 'number[]'.</span></span><br></pre></td></tr></table></figure>

<p><code>a = ro;</code> 와 같이 읽기 전용 배열을 일반 배열로 재할당하는 것도 금지됩니다. 하지만 type assertion을 통해 오버라이드 할 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = ro <span class="keyword">as</span> <span class="built_in">number</span>[];</span><br></pre></td></tr></table></figure>

<h2 id="Indexable-Types"><a href="#Indexable-Types" class="headerlink" title="Indexable Types"></a>Indexable Types</h2><p>자바스크립트의 객체는 프로퍼티 접근자(Property accessor)를 두 가지 제공합니다. 하나는 점 표기법(Dot notation)이고, 다른 하나는 괄호 표기법(Bracket notation)입니다. 기본적으로 점 표기법을 자주 사용하기는 하지만, 동적으로 프로퍼티에 접근하려는 경우 문자열으로 프로퍼티에 접근할 수 있는 괄호 표기법을 사용하기도 합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dict = &#123;</span><br><span class="line">  foo: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(dict).forEach(<span class="function">(<span class="params">k</span>) =&gt;</span> <span class="built_in">console</span>.log(dict[k])); <span class="comment">// Error: Element implicitly has an 'any' type because expression of type 'string' can't be used to index type '&#123; foo: number; bar: number; &#125;'.</span></span><br></pre></td></tr></table></figure>

<p>타입스크립트에서는 <code>dict</code>의 프로퍼티를 동적으로 접근하는 부분에서 컴파일 에러가 발생합니다. 이를 해결하기 위한 방법은 두 가지가 있습니다. 컴파일 옵션 중 <code>noImplicitAny</code> 값을 <code>false</code>로 바꾸는 것과 객체 자체에 <em>Indexable</em>하게 만드는 방법이 있습니다. 객체를 Indexable 하게 만드려면 인덱스 시그니처(Index signature)를 사용하면 된다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Indexable &#123;</span><br><span class="line">  [key: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dict: Indexable = &#123;</span><br><span class="line">  foo: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(dict).forEach(<span class="function">(<span class="params">k</span>) =&gt;</span> <span class="built_in">console</span>.log(dict[k])); <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>

<p>위에 새로 추가된 인터페이스 내부 <code>[key: string]: any</code>라는 문장이 바로 인덱스 시그니처입니다. 괄호 표현법과 함께 <code>string</code>으로 접근하게 되면 <code>any</code>타입의 무언가를 돌려줄 것이라는 의미다. 여기서는 묵시적으로 <code>any</code> 타입을 리턴하지 않으므로 에러가 발생하지 않는다.</p>
<h2 id="변수와-인터페이스"><a href="#변수와-인터페이스" class="headerlink" title="변수와 인터페이스"></a>변수와 인터페이스</h2><p>인터페이스는 변수의 타입으로 사용할 수 있습니다. 인터페이스를 타입으로 선언한 변수는 해당 인터페이스를 준수해야 합니다. 이것은 새로운 타입을 정의하는 것과 유사합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 인터페이스 정의</span></span><br><span class="line"><span class="keyword">interface</span> User &#123;</span><br><span class="line">  email: <span class="built_in">string</span>;</span><br><span class="line">  username: <span class="built_in">string</span>;</span><br><span class="line">  emailVerified: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 변수 user의 타입으로 User 인터페이스 선언</span></span><br><span class="line"><span class="keyword">let</span> user: User;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 변수 user는 User 인터페이스 준수하여 작성</span></span><br><span class="line">user = &#123; email: <span class="string">'test@naver.com'</span>, username: <span class="string">'hyeongyu'</span>, emailVerified: <span class="literal">false</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>인터페이스를 사용하여 함수 매개변수의 타입을 선언할 수 있습니다. 마찬가지로 해당 함수의 매개변수는 지정한 인터페이스를 준수해야 합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 인터페이스 정의</span></span><br><span class="line"><span class="keyword">interface</span> User &#123;</span><br><span class="line">  email: <span class="built_in">string</span>;</span><br><span class="line">  username: <span class="built_in">string</span>;</span><br><span class="line">  emailVerified: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> users: User[] = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 매개변수 user의 타입으로 User 인터페이스를 선언</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addUser</span>(<span class="params">user: User</span>) </span>&#123;</span><br><span class="line">  users = [...users, user];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newUser = &#123; email: <span class="string">'ahg2656@naver.com'</span>, username: <span class="string">'hyeongyu'</span>, emailVerified: <span class="literal">false</span> &#125;;</span><br><span class="line">addUser(newUser);</span><br><span class="line"><span class="built_in">console</span>.log(users); <span class="comment">// [&#123;email:'test@naver.com',username:'hyeongyu',emailVerified:false&#125;]</span></span><br></pre></td></tr></table></figure>

<h2 id="함수와-인터페이스"><a href="#함수와-인터페이스" class="headerlink" title="함수와 인터페이스"></a>함수와 인터페이스</h2><p>프로퍼티을 가진 객체를 설명하는 것 외에도 인터페이스를 이용해 함수 타입을 정의할 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IFormat &#123;</span><br><span class="line">  (data: <span class="built_in">string</span>, toUpper?: <span class="built_in">boolean</span>): <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>함수의 인터페이스에는 타입이 선언된 프로퍼티와 리턴 타입을 정의합니다. 함수 인터페이스를 구현하는 함수는 인터페이스를 준수해야 합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> format: IFormat = <span class="function"><span class="keyword">function</span> (<span class="params">data: <span class="built_in">string</span>, toUpper: <span class="built_in">boolean</span></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>아래 코드는 함수 타입의 변수를 만들고 같은 타입의 함수를 할당하는 방법을 보여줍니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IFormat &#123;</span><br><span class="line">  (data: <span class="built_in">string</span>, toUpper: <span class="built_in">boolean</span>): <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> customFormat: IFormat = <span class="function"><span class="keyword">function</span> (<span class="params">str: <span class="built_in">string</span>, isUpper?: <span class="built_in">boolean</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isUpper) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.toUpperCase();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> str.toLowerCase();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(customFormat(<span class="string">'Hello'</span>, <span class="literal">false</span>));</span><br></pre></td></tr></table></figure>

<p>이 때, 실제 함수 정의와 인터페이스에서의 매개변수 이름은 꼭 같을 필요는 없습니다. 즉, 위처럼 프로퍼티명을 <code>toUpper</code>가 아닌 <code>isUpper</code>로 바꾸어 써도 프로퍼티들의 타입 순서만 맞는다면 에러는 발생하지 않습니다.</p>
<h2 id="클래스와-인터페이스"><a href="#클래스와-인터페이스" class="headerlink" title="클래스와 인터페이스"></a>클래스와 인터페이스</h2><p>클래스 선언문의 <code>implements</code> 뒤에 인터페이스를 선언하면 해당 클래스는 지정된 인터페이스를 반드시 구현해야 합니다. 이를 통해 인터페이스를 구현하는 클래스의 일관성을 유지할 수 있는 장점들을 가집니다. 인터페이스는 프로퍼티와 메소드를 가질 수 있다는 점에서 클래스와 유사하지만 직접 인스턴스를 생성할 수는 없습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 인터페이스 정의</span></span><br><span class="line"><span class="keyword">interface</span> IUser &#123;</span><br><span class="line">  email: <span class="built_in">string</span>;</span><br><span class="line">  username: <span class="built_in">string</span>;</span><br><span class="line">  emailVerified: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// User 클래스는 IUser 인터페이스를 구현해야 합니다.</span></span><br><span class="line"><span class="keyword">class</span> User <span class="keyword">implements</span> IUser &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> email: <span class="built_in">string</span>, <span class="keyword">public</span> username: <span class="built_in">string</span>, <span class="keyword">public</span> emailVerified: <span class="built_in">boolean</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> User(<span class="string">'test@naver.com'</span>, <span class="string">'hyeongyu'</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(user);</span><br></pre></td></tr></table></figure>

<p>인터페이스는 매개변수뿐만 아니라 메소드도 포함할 수 있습니다. 단, 모든 메소드는 추상 메소드이어야 합니다. 그리고 인터페이스를 구현하는 클래스는 인터페이스에서 정의한 매개변수와 추상 메소드를 반드시 구현해야 합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 인터페이스 정의</span></span><br><span class="line"><span class="keyword">interface</span> IPerson &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  sayHello(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Person <span class="keyword">implements</span> IPerson &#123;</span><br><span class="line">  <span class="comment">// 인터페이스에서 정의한 프로퍼티 구현</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 인터페이스에서 정의한 추상 메소드 구현</span></span><br><span class="line">  sayHello() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hello, <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greeter</span>(<span class="params">person: IPerson</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  person.sayHello();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> me = <span class="keyword">new</span> Person(<span class="string">'An'</span>);</span><br><span class="line">greeter(me);</span><br></pre></td></tr></table></figure>

<h2 id="하이브리드-타입"><a href="#하이브리드-타입" class="headerlink" title="하이브리드 타입"></a>하이브리드 타입</h2><p>메서드와 프로퍼티를 모두 가진 하이브리드 타입의 인터페이스도 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Counter &#123;</span><br><span class="line">  (start: <span class="built_in">number</span>): <span class="built_in">string</span>;</span><br><span class="line">  interval: <span class="built_in">number</span>;</span><br><span class="line">  reset(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCounter</span>(<span class="params"></span>): <span class="title">Counter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> counter = &lt;Counter&gt;<span class="function"><span class="keyword">function</span> (<span class="params">start: <span class="built_in">number</span></span>) </span>&#123;&#125;;</span><br><span class="line">  counter.interval = <span class="number">123</span>;</span><br><span class="line">  counter.reset = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> counter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = getCounter();</span><br><span class="line">c(<span class="number">10</span>);</span><br><span class="line">c.reset();</span><br><span class="line">c.interval = <span class="number">5.0</span>;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/04/14/mac-key-tip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/mac-key-tip/" class="post-title-link" itemprop="url">맥 유저를 위한 작은 팁</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-14 13:00:00 / Modified: 16:20:26" itemprop="dateCreated datePublished" datetime="2020-04-14T13:00:00+09:00">2020-04-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mac/" itemprop="url" rel="index"><span itemprop="name">mac</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/14/mac-key-tip/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/14/mac-key-tip/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>많은 개발자분들이 마크다운 형식으로 개발 관련 글들을 작성하는 것으로 알고 있습니다.</p>
<p>영어만으로 작성을 하면 불편함을 못 느낄 수 있지만 한글을 사용하는 중에 백틱(`)을 사용하려다 깊은 빡침을 느낀 적이 있으실 겁니다. 왜냐하면 한글인 상태에서 백틱을 입력하면 <code>₩</code>가 입력되기 때문입니다.</p>
<p>저와 같은 경험과 빡침을 느끼신 분들을 위한 작은 팁 하나 드리겠습니다. 아래 명령어를 터미널에 입력하시게 되면 이 사소하지만 불편한 점이 해결됩니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ <span class="keyword">if</span> ! [ -f ~/Library/KeyBindings/DefaultkeyBinding.dict ]; <span class="keyword">then</span> mkdir -p ~/Library/KeyBindings &amp;&amp; <span class="built_in">echo</span> <span class="string">'&#123;"₩" = ("insertText:", "\`"); "~4" = ("insertText:","₩");&#125;'</span> &gt; ~/Library/KeyBindings/DefaultkeyBinding.dict; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>터미널에 입력 한 뒤, 재부팅을 진행해주세요. 그리고 한글인 상태에서 백틱을 입력해보시면 마법을 보실 수 있습니다.</p>
<p>혹시 위의 설정을 없애고 초기 상태로 돌리시고 싶으신 분들은 아래 명령어를 입력하시면 됩니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf ~/Library/KeyBindings/DefaultkeyBinding.dict</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/04/14/mysql-uninstall/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/14/mysql-uninstall/" class="post-title-link" itemprop="url">Mac 유저를 위한 MySQL 설치 및 삭제</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-04-14 11:00:00 / Modified: 13:22:07" itemprop="dateCreated datePublished" datetime="2020-04-14T11:00:00+09:00">2020-04-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/14/mysql-uninstall/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/14/mysql-uninstall/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mac에서-MySQL-삭제하는-방법"><a href="#Mac에서-MySQL-삭제하는-방법" class="headerlink" title="Mac에서 MySQL 삭제하는 방법"></a>Mac에서 MySQL 삭제하는 방법</h1><ul>
<li><code>brew install mysql</code>로 설치했을경우</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ $ sudo rm -rf /usr/<span class="built_in">local</span>/var/mysql</span><br><span class="line">~ $ sudo rm -rf /usr/<span class="built_in">local</span>/bin/mysql*</span><br><span class="line">~ $ sudo rm -rf /usr/<span class="built_in">local</span>/Cellar/mysql</span><br></pre></td></tr></table></figure>

<ul>
<li>MySQL 홈페이지에서 DMG파일로 설치했을 경우</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ $ sudo rm -rf /usr/<span class="built_in">local</span>/mysql*</span><br><span class="line">~ $ sudo rm -rf /Library/PreferencePanes/My*</span><br><span class="line">~ $ sudo rm -rf /var/db/receipts/com.mysql.*</span><br></pre></td></tr></table></figure>

<p>파일 삭제 후 재부팅하는 것을 권장드립니다.</p>
<h1 id="Homebrew를-이용한-설치"><a href="#Homebrew를-이용한-설치" class="headerlink" title="Homebrew를 이용한 설치"></a>Homebrew를 이용한 설치</h1><p>Homebrew를 이용해 MySQL을 재설치 해보자</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">~ $ brew update</span><br><span class="line">Already up-to-date.</span><br><span class="line"></span><br><span class="line">~ $ brew install mysql</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/mysql-8.0.19.mojave.bottle.</span><br><span class="line">==&gt; Downloading from https://akamai.bintray.com/23/233aa7bfef136a19a02d443b9b2d8</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring mysql-8.0.19.mojave.bottle.2.tar.gz</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/mysql/8.0.19/bin/mysqld --initialize-insecure --user=hyeon</span><br><span class="line">==&gt; Caveats</span><br><span class="line">We<span class="string">'ve installed your MySQL database without a root password. To secure it run:</span></span><br><span class="line"><span class="string">    mysql_secure_installation</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">MySQL is configured to only allow connections from localhost by default</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To connect run:</span></span><br><span class="line"><span class="string">    mysql -uroot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To have launchd start mysql now and restart at login:</span></span><br><span class="line"><span class="string">  brew services start mysql</span></span><br><span class="line"><span class="string">Or, if you don'</span>t want/need a background service you can just run:</span><br><span class="line">  mysql.server start</span><br><span class="line">==&gt; Summary</span><br><span class="line">🍺  /usr/<span class="built_in">local</span>/Cellar/mysql/8.0.19: 286 files, 288.7MB</span><br></pre></td></tr></table></figure>

<p>Homebrew를 이용하기 전 반드시 <code>brew update</code> 명령어를 이용해서 최신 버전으로 업데이트해주세요.</p>
<p>설치가 정상적으로 완료되었는지, 확인해볼까요?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~ $ brew search mysql</span><br><span class="line"><span class="comment"># ==&gt; Formulae</span></span><br><span class="line"><span class="comment"># automysqlbackup            mysql-client@5.7           mysql-search-replace</span></span><br><span class="line"><span class="comment"># mysql ✔                    mysql-connector-c++        mysql@5.6</span></span><br><span class="line"><span class="comment"># mysql++                    mysql-connector-c++@1.1    mysql@5.7</span></span><br><span class="line"><span class="comment"># mysql-client               mysql-sandbox              mysqltuner</span></span><br><span class="line"><span class="comment"># ==&gt; Casks</span></span><br><span class="line"><span class="comment"># mysql-connector-python     mysql-utilities            navicat-for-mysql</span></span><br><span class="line"><span class="comment"># mysql-shell                mysqlworkbench             sqlpro-for-mysql</span></span><br></pre></td></tr></table></figure>

<p>위에 mysql이 보입니다.<br>그럼 이제 MySQL를 시작하고 접속해 봅시다. 현재 <code>root</code> 사용자는 비밀번호가 없는 상태입니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">~ $ brew services start mysql</span><br><span class="line"><span class="comment"># ==&gt; Successfully started `mysql` (label: homebrew.mxcl.mysql)</span></span><br><span class="line"></span><br><span class="line">~ $ mysql -uroot</span><br><span class="line"><span class="comment"># Welcome to the MySQL monitor.  Commands end with ; or \g.</span></span><br><span class="line"><span class="comment"># Your MySQL connection id is 8</span></span><br><span class="line"><span class="comment"># Server version: 8.0.19 Homebrew</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Oracle is a registered trademark of Oracle Corporation and/or its</span></span><br><span class="line"><span class="comment"># affiliates. Other names may be trademarks of their respective</span></span><br><span class="line"><span class="comment"># owners.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># mysql&gt;</span></span><br></pre></td></tr></table></figure>

<p>위와 같이 실행된다면 서비스가 정상적으로 실행되었고 <code>root</code>라는 계정으로 해당 서비스에 접속한 것 입니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql&gt; exit</span></span><br><span class="line"><span class="comment"># Bye</span></span><br></pre></td></tr></table></figure>

<p><code>exit</code>을 입력하면 접속된 서비스에서 나올 수 있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">~ $ mysql_secure_installation</span><br><span class="line"><span class="comment"># Securing the MySQL server deployment.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Connecting to MySQL using a blank password.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># VALIDATE PASSWORD COMPONENT can be used to test passwords</span></span><br><span class="line"><span class="comment"># and improve security. It checks the strength of password</span></span><br><span class="line"><span class="comment"># and allows the users to set only those passwords which are</span></span><br><span class="line"><span class="comment"># secure enough. Would you like to setup VALIDATE PASSWORD component?</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Press y|Y for Yes, any other key for No:</span></span><br></pre></td></tr></table></figure>

<p>비밀번호 가이드 설정에 대한 질문입니다.</p>
<p>Yes - 복잡한 비밀번호 설정 (ex. “q1w2e3r4”와 같은 조합형(?) 비밀번호를 설정하여야 합니다.)<br>No - 쉬운 비밀번호 설정 (ex. “1234”처럼 쉬운 비밀번호를 설정할 수 있습니다.)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Press y|Y for Yes, any other key for No: N</span><br><span class="line">Please set the password for root here.</span><br><span class="line"></span><br><span class="line">New password:</span><br><span class="line"></span><br><span class="line">Re-enter new password:</span><br><span class="line">By default, a MySQL installation has an anonymous user,</span><br><span class="line">allowing anyone to log into MySQL without having to have</span><br><span class="line">a user account created for them. This is intended only for</span><br><span class="line">testing, and to make the installation go a bit smoother.</span><br><span class="line">You should remove them before moving into a production</span><br><span class="line">environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? (Press y|Y for Yes, any other key for No) :</span><br></pre></td></tr></table></figure>

<p>사용자 설정을 묻는 질문입니다.</p>
<p>Yes - 접속하는 경우 “mysql -uroot”처럼 -u 옵션 필요<br>No - 접속하는 경우 “mysql”처럼 -u 옵션 불필요</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Remove anonymous users? (Press y|Y for Yes, any other key for No) : Y</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from</span><br><span class="line">&#39;localhost&#39;. This ensures that someone cannot guess at</span><br><span class="line">the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? (Press y|Y for Yes, any other key for No) :</span><br></pre></td></tr></table></figure>

<p>다른 IP에서 root 아이디로 원격접속을 설정하는 질문입니다.</p>
<p>Yes - 원격접속 불가능<br>No - 원격접속 가능</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : Y</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">By default, MySQL comes with a database named &#39;test&#39; that</span><br><span class="line">anyone can access. This is also intended only for testing,</span><br><span class="line">and should be removed before moving into a production</span><br><span class="line">environment.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Remove test database and access to it? (Press y|Y for Yes, any other key for No) :</span><br></pre></td></tr></table></figure>

<p>Test 데이터베이스를 설정하는 질문입니다.</p>
<p>Yes - Test 데이터베이스 제거<br>No - Test 데이터베이스 유지</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : Y</span><br><span class="line"> - Dropping test database...</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes</span><br><span class="line">made so far will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? (Press y|Y for Yes, any other key for No) :</span><br></pre></td></tr></table></figure>

<p>변경된 권한을 테이블에 적용하는 설정에 대한 질문입니다.</p>
<p>Yes - 적용시킨다.<br>No - 적용시키지 않는다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">All done!</span><br></pre></td></tr></table></figure>

<p>이제 <code>root</code> 사용자의 비밀번호가 설정되었습니다. 확인해볼까요?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ $ mysql -uroot</span><br><span class="line"><span class="comment"># ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)</span></span><br></pre></td></tr></table></figure>

<p>위에선 실행 가능했던 명령이 <code>Access denied for user ~</code>라며 접속이 거부되었습니다.</p>
<p>그렇다는 것은 비밀번호가 정상적으로 설정되었다는 의미입니다.</p>
<p>이번엔 비밀번호를 입력하여 접속 시도해보겠습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">~ $ mysql -uroot -p</span><br><span class="line"><span class="comment"># Enter password:</span></span><br><span class="line"><span class="comment"># Welcome to the MySQL monitor.  Commands end with ; or \g.</span></span><br><span class="line"><span class="comment"># Your MySQL connection id is 13</span></span><br><span class="line"><span class="comment"># Server version: 8.0.19 Homebrew</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Oracle is a registered trademark of Oracle Corporation and/or its</span></span><br><span class="line"><span class="comment"># affiliates. Other names may be trademarks of their respective</span></span><br><span class="line"><span class="comment"># owners.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># mysql&gt;</span></span><br></pre></td></tr></table></figure>

<p>비밀번호가 일치한다면 성공적으로 접속되는 것을 확인할 수 있습니다!</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql&gt; status;</span></span><br><span class="line"><span class="comment"># --------------</span></span><br><span class="line"><span class="comment"># mysql  Ver 8.0.19 for osx10.14 on x86_64 (Homebrew)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Connection id:		13</span></span><br><span class="line"><span class="comment"># Current database:</span></span><br><span class="line"><span class="comment"># Current user:		root@localhost</span></span><br><span class="line"><span class="comment"># SSL:			Not in use</span></span><br><span class="line"><span class="comment"># Current pager:		less</span></span><br><span class="line"><span class="comment"># Using outfile:		''</span></span><br><span class="line"><span class="comment"># Using delimiter:	;</span></span><br><span class="line"><span class="comment"># Server version:		8.0.19 Homebrew</span></span><br><span class="line"><span class="comment"># Protocol version:	10</span></span><br><span class="line"><span class="comment"># Connection:		Localhost via UNIX socket</span></span><br><span class="line"><span class="comment"># Server characterset:	utf8mb4 &lt;----------</span></span><br><span class="line"><span class="comment"># Db     characterset:	utf8mb4 &lt;----------</span></span><br><span class="line"><span class="comment"># Client characterset:	utf8mb4 &lt;----------</span></span><br><span class="line"><span class="comment"># Conn.  characterset:	utf8mb4 &lt;----------</span></span><br><span class="line"><span class="comment"># UNIX socket:		/tmp/mysql.sock</span></span><br><span class="line"><span class="comment"># Binary data as:		Hexadecimal</span></span><br><span class="line"><span class="comment"># Uptime:			1 hour 9 min 46 sec</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Threads: 2  Questions: 21  Slow queries: 0  Opens: 130  Flush tables: 3  Open tables: 48  Queries # per second avg: 0.005</span></span><br><span class="line"><span class="comment"># --------------</span></span><br></pre></td></tr></table></figure>

<p>마지막으로 <code>status;</code> 명령어를 입력 후,</p>
<p>characterset 설정이 전부 “utf8”인지 확인해주세요.</p>
<p>기본적으로 “utf8”로 설정이 되어있지 않다면 설정을 바꿔주셔야 합니다.</p>
<h1 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h1><ol start="0">
<li><p>MySQL 서버 확인 : brew services list</p>
</li>
<li><p>MySQL 서버 시작 : brew services start mysql</p>
</li>
<li><p>MySQL DB 로그인 : mysql -uroot -p</p>
</li>
<li><p>MySQL DB 로그아웃 : exit 또는 quit</p>
</li>
<li><p>MySQL 서버 종료 : brew services stop mysql</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/04/10/method_vs_function/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/10/method_vs_function/" class="post-title-link" itemprop="url">알쓸신잡 (Method vs Function)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-10 13:00:00" itemprop="dateCreated datePublished" datetime="2020-04-10T13:00:00+09:00">2020-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-13 18:44:08" itemprop="dateModified" datetime="2020-04-13T18:44:08+09:00">2020-04-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/10/method_vs_function/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/10/method_vs_function/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="알쓸신잡"><a href="#알쓸신잡" class="headerlink" title="알쓸신잡"></a>알쓸신잡</h1><p>안녕하세요. 프론트앤드 개발자 구피입니다. 이번에 <code>알아두면 쓸데 없지만 신기한 자바스크립트 시리즈</code>를 써볼까 합니다. 평소에 개발하면서 사용한 적은 딱히 없지만 한번쯤 궁금했던 것들을 차례대로 소개해보려고 합니다.</p>
<p>여러분은 혹시 자바스크립트에서 Method와 Function의 차이를 알고 계신가요?</p>
<p>저 같은 경우에는 method와 function을 통틀어 <strong>함수</strong>라고 부르며 구분없이 사용해왔습니다. 물론 둘의 차이를 알지 못하더라도 개발에는 전혀 지장이 없었습니다.</p>
<p>제가 이 둘의 차이를 알게 된 것은 자바스크립트의 <code>this</code>에 대해서 공부하면서 입니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'???'</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'thomas'</span>,</span><br><span class="line">  call: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello, '</span> + <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">obj.call(); <span class="comment">// - (1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> noObj = ob.call;</span><br><span class="line">noObj(); <span class="comment">// - (2)</span></span><br></pre></td></tr></table></figure>

<p>자바스크립트를 공부하셨던 분들이라면 위 (1)과 (2)의 결과값이 다르다는 것은 이미 알고 계실 겁니다. 이것이 바로 Method와 Function의 차이입니다.</p>
<p>그렇다면 어떤게 Method일까요?</p>
<p>위의 예제는 (1)이 Method이고 (2)가 Function입니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj.call();</span><br></pre></td></tr></table></figure>

<p>Method는 오브젝트의 프로퍼티에 정의된 Function이라고 생각하면 됩니다. 위와 같이 오브젝트를 통해 해당 Method를 호출할 경우에는 Method 내에서 <code>this</code>는 해당 객체의 인스턴스를 가리킵니다. 그렇기 때문에 <code>this.name</code>은 thomas를 반환하는 것이죠.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">noObj();</span><br></pre></td></tr></table></figure>

<p>반면에 객체가 아닌 변수 noObj에 할당된 것은 단순한 Function입니다. 이 Function이 호출되는 시점에 <code>this</code>는 <code>window</code>를 가리키고 있기 때문에 ???를 반환하는 것 입니다.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hyeongyuan.github.io/2020/04/01/typescript_study_3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Goofy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevieW">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/01/typescript_study_3/" class="post-title-link" itemprop="url">타입스크립트 스터디 3주차</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-01 19:30:00" itemprop="dateCreated datePublished" datetime="2020-04-01T19:30:00+09:00">2020-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-13 19:40:42" itemprop="dateModified" datetime="2020-04-13T19:40:42+09:00">2020-04-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/04/01/typescript_study_3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/01/typescript_study_3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="함수-Funtion"><a href="#함수-Funtion" class="headerlink" title="함수 (Funtion)"></a>함수 (Funtion)</h1><p>함수는 애플리케이션의 코드를 구성하는 기본 요소입니다.</p>
<p>타입스크립트의 함수를 살펴보기 전에 먼제 자바스크립트의 함수를 간단히 살펴보고 지나가겠습니다.</p>
<h2 id="자바스크립트-함수"><a href="#자바스크립트-함수" class="headerlink" title="자바스크립트 함수"></a>자바스크립트 함수</h2><p>타입스크립트는 자바스크립트와 동일한 형태로 함수를 선언하고 호출할 수 있습니다.</p>
<p>자바스크립트의 함수는 두 가지로 나눌 수 있습니다.</p>
<ul>
<li>기명 함수 (Named function)</li>
<li>익명 함수 (Anonymous function)</li>
</ul>
<p>기명 함수는 <strong>3.1.1. var 선언자의 특징</strong>에서 언급했던 개념인 호이스팅(hoisting)이 발생합니다.</p>
<blockquote>
<p><strong>호이스팅</strong>이란 선언한 변수가 스코프의 최상위로 끌어올림 되는 현상이다.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">3</span>, <span class="number">5</span>); <span class="comment">// 함수 선언하기 전에도 호출 가능 (호이스팅)</span></span><br><span class="line"><span class="comment">// Named function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">3</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>기명 함수와는 다르게 익명 함수는 호이스팅이 발생하지 않습니다. 그렇기 때문에 함수 선언 전에 함수를 호출하면 오류가 발생합니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// substract(5, 3); // 함수 선언하기 전에는 호출 불가능</span></span><br><span class="line"><span class="comment">// Anonymous function</span></span><br><span class="line"><span class="keyword">let</span> substract = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;;</span><br><span class="line">substract(<span class="number">5</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h2 id="타입스크립트-함수"><a href="#타입스크립트-함수" class="headerlink" title="타입스크립트 함수"></a>타입스크립트 함수</h2><p>타입스크립트 또한 자바스크립트와 마찬가지로 기명 함수와 익명 함수로 함수를 생성할 수 있습니다.</p>
<h3 id="함수-타입"><a href="#함수-타입" class="headerlink" title="함수 타입"></a>함수 타입</h3><p>타입스크립트는 함수에도 타입을 선언할 수 있습니다. 타입 지정 대상은 함수로 전달되는 매개변수나 최종 반환되는 값이 될 수 있습니다. 이러한 타입 선언을 통해 타입 안전성을 강화합니다. 타입은 다음과 같이 선언합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>함수를 할당할 변수에 직접 타입 선언하는 것도 가능합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myFunc: <span class="built_in">Function</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>기본적으로 타입스크립트에는 <code>Function</code>이라는 인터페이스가 내장되어있기 때문에 위와 같이 선언만 해도 함수 이외에 다른 값은 할당할 수 없습니다. 그러나 매개변수나 반환 값의 타입에 상관없이 어떤 함수라도 할당될 수 있기 때문에 타입 안정성이 완전히 확보되었다고 보기 힘듭니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myFunc: <span class="function">(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = add;</span><br></pre></td></tr></table></figure>

<p>위와 같이 함수 타입에 매개변수와 반환 값의 타입을 지정해주면 해당 함수에 대한 타입 안정성을 보장할 수 있습니다. 또한 함수 타입을 따로 선언하게 되면, 비슷한 유형의 함수에 재사용할 수 있습니다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> calcType = <span class="function">(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">let</span> add: calcType = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br><span class="line"><span class="keyword">let</span> multiply: calcType = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a * b;</span><br></pre></td></tr></table></figure>

<h2 id="매개변수의-활용"><a href="#매개변수의-활용" class="headerlink" title="매개변수의 활용"></a>매개변수의 활용</h2><p>자바스크립트에서는 기본적으로 모든 함수가 가변적으로 인자를 받을 수 있습니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>)); <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>, <span class="number">5</span>)); <span class="comment">// 15</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>, <span class="number">5</span>, <span class="number">1</span>)); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>

<p>타입스크립트에서는 기본적으로 가변 변수를 허용하지 않습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)); <span class="comment">// Error: Expected 2 arguments, but got 1.</span></span><br></pre></td></tr></table></figure>

<p>하지만 이렇게 정해진 숫자의 인자만 받을 수 있다면 유연성이 떨어져서 개발하는 과정에서 불편함이 발생합니다.</p>
<p>타입스트립트 함수에 정해진 타입과 정해진 수의 인자를 넘기지 않으면 에러를 발생시키므로 함수를 선언할 때 어느 정도의 유연성을 확보해야 함수 오버로딩을 구현할 수 있습니다. 이러한 인자 갯수의 유연성을 확보하는 방법을 이어서 살펴 보겠습니다.</p>
<h3 id="기본-초기화-매개변수"><a href="#기본-초기화-매개변수" class="headerlink" title="기본 초기화 매개변수"></a>기본 초기화 매개변수</h3><p>타입스크립트 ES6에서 추가된 기본 초기화 매개변수(default-initialized parameter)는 함수의 특정 매개변수에 인수가 전달되지 않으면 매개변수에 설정된 초기값으로 초기화하는 기능입니다.</p>
<p>ES6 이전의 자바스크립트에서 매개변수로 넘겨받는 값의 초기값을 설정해주고 싶었다면 보통 다음과 같이 할 것입니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomthing</span>(<span class="params">whatever</span>) </span>&#123;</span><br><span class="line">  whatever = whatever || <span class="string">'whatever'</span>; <span class="comment">/* 초기값 설정 */</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ES6와 타입스크립트에서는 이렇게 합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">whatever = 'whatever' <span class="comment">/* 초기값 설정 */</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>타입스크립트에서는 Default 값을 주는 경우에는 타입을 선언하지 않아도 인자의 타입을 추론하므로 선언을 생략해도 무방합니다.</p>
<p>아래 코드는 기본 초기화 매개변수를 사용한 간단한 예제입니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">globalPhoneNumber</span>(<span class="params"><span class="built_in">number</span>: <span class="built_in">string</span>, countryCode = '+82'</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;countryCode&#125;</span><span class="subst">$&#123;<span class="built_in">number</span>.slice(<span class="number">1</span>)&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">globalPhoneNumber(<span class="string">'01015888282'</span>); <span class="comment">// +821015888282</span></span><br><span class="line">globalPhoneNumber(<span class="string">'01015774949'</span>, <span class="string">'+04'</span>); <span class="comment">// +041015774949</span></span><br></pre></td></tr></table></figure>

<h3 id="나머지-매개변수"><a href="#나머지-매개변수" class="headerlink" title="나머지 매개변수"></a>나머지 매개변수</h3><p>나머지 매개변수(rest parameter)는 ES6에서 제안된 특징으로 개수가 정해지지 않은 인수(arguments)를 배열(array)로 받을 수 있는 기능입니다. 이는 <code>...</code>라는 표기법을 통해 나머지 매개변수에 접근할 수 있습니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concat</span>(<span class="params">...restParameter <span class="regexp">/* 나머지 매개변수 */</span></span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>나머지 매개변수는 0개 이상의 요소를 받을 수 있습니다. 따라 위 예제의 concat 함수를 호출하려면 최소한 0개 이상의 인수를 전댈해야 합니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concat</span>(<span class="params">...restParameter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> restParameter.join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(concat(<span class="string">'a'</span>, <span class="number">1</span>, <span class="literal">true</span>, &#123;&#125;)); <span class="comment">// a1true&#123;&#125;</span></span><br></pre></td></tr></table></figure>

<p>위의 concat 함수에 선언된 나머지 매개변수는 타입이 없기 때문에 타입 구분없이 여러 인수를 전달받아 문자열 합치기를 수행합니다. 그러나 이를 의도하고 구현하는 경우는 극히 드물 것입니다. 보통은 문자열 배열을 하나의 문자열로 만들기 위해 위와 같은 함수를 이용할 것입니다. 이런 경우에는 나머지 매개변수에 타입을 추가해 지정한 타입의 인수만을 받도록 제한할 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concat</span>(<span class="params">...restParameter: <span class="built_in">string</span>[]  <span class="comment">/* 나머지 매개변수 타입 */</span></span>): <span class="title">string</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<h3 id="선택-매개변수"><a href="#선택-매개변수" class="headerlink" title="선택 매개변수"></a>선택 매개변수</h3><p>앞에서 살펴본 나머지 매개변수를 선언하여 가변적으로 인자를 받을 수 있었습니다. 그런데 나머지 매개변수는 최대 개수가 정해져 있지 않기 때문에 불필요한 인수들이 함께 전달될 수 있습니다. 예를 들어 인수의 개수를 1개 혹은 2개로 제한하기 위해서는 ‘선택 매개변수(optional parameter)’를 이용해야 합니다.</p>
<p>선택 매개변수는 변수명 뒤에 물음표(<code>?</code>)를 붙이는 식으로 선언합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a: <span class="built_in">number</span>, b?: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>)); <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<p>앞서 기본 초기화 매개변수를 이용해 인수가 생략돼 있을 때 매개변수의 초기값을 설정할 수 있었습니다. 그런데 이 방법은 선택 매개변수와 결합해서 사용할 수 없습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a: <span class="built_in">number</span>, b?: <span class="built_in">number</span> = 2 <span class="comment">/* 함깨 사용 불가 */</span></span>):<span class="title">number</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>아래 코드는 선택 매개변수를 사용한 간단한 예제입니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeProfile</span>(<span class="params">name: <span class="built_in">string</span>, toUpper?: <span class="built_in">boolean</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> username = name;</span><br><span class="line">  <span class="keyword">if</span> (toUpper) &#123;</span><br><span class="line">    username = username.toUpperCase();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`hello, <span class="subst">$&#123;username&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">makeProfile(<span class="string">'thomas'</span>); <span class="comment">// hello, thomas</span></span><br><span class="line">makeProfile(<span class="string">'hyeonyu'</span>, <span class="literal">true</span>); <span class="comment">// hello, HYEONGYU</span></span><br><span class="line">makeProfile(<span class="string">'goofy'</span>, <span class="literal">false</span>, <span class="number">1</span>); <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>

<h2 id="함수-오버로드"><a href="#함수-오버로드" class="headerlink" title="함수 오버로드"></a>함수 오버로드</h2><p>함수 오버로드(function overloads)는 함수명은 같지만, 매개변수와 반환 타입이 다른 함수를 여러개 선언 할 수 있는 특징을 말합니다. 컴파일 시간에 가장 적합한 오버로드를 선택해 컴파일 함으로 자바스크립 실행 시 런타임 비용이 발생하지 않습니다. 오버로드는 다음과 같이 목록 형태로 선언할 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 올바른 예 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">any</span>, b: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>유의해야할 점은 타입스크립트는 자바스크립트로 변환되고 나서도 동일한 형태를 유지해야 한다는 것입니다. 따라서 각 오버로드는 다음처럼 독립된 블록으로 선언하면 안됩니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 잘못된 예 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="title">string</span> </span>&#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">any</span>, b: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>가장 일반적인(general) 함수 (매개변수를 any 타입으로 선언)의 시그니처를 가장 아래에 선언하고 그 위로 구체적인(specific) 타입을 명시한 함수의 시그니처를 쌓는 방식으로 선언해야 합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="string">'hello '</span>, <span class="string">'world!'</span>)); <span class="comment">// hello world!</span></span><br></pre></td></tr></table></figure>

<p>이때 매개변수의 갯수가 다른 오버로드를 지정할 때는 선택 매개변수를 둬 매개변수 갯수에 변화를 줄 수 있도록 허용할 수 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">any</span>, b?: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      ...   <span class="comment">// 두번째 인자의 값이 없는 경우</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="유니언-타입"><a href="#유니언-타입" class="headerlink" title="유니언 타입"></a>유니언 타입</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>(<span class="params">x: &#123; name: <span class="built_in">string</span> &#125;</span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pack</span>(<span class="params">x: &#123; month: <span class="built_in">number</span>&#125;</span>) : <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>(<span class="params">x: <span class="built_in">number</span></span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>(<span class="params">x: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>오버로드로 선언된 함수는 다양한 타입의 인수를 받고 반환 타입도 여러 개입니다. 이처럼 함수의 매개변수와 반환 타입이 다양한 경우에 유니언 타입 형태로도 표현 가능합니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>(<span class="params">x: <span class="built_in">number</span> | &#123;name: <span class="built_in">string</span>&#125; | &#123;name: <span class="built_in">number</span>&#125;</span>) <span class="title">number</span> | <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>(<span class="params">x: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<h2 id="객체-리터럴의-선언과-객체-리터럴-타입의-선언"><a href="#객체-리터럴의-선언과-객체-리터럴-타입의-선언" class="headerlink" title="객체 리터럴의 선언과 객체 리터럴 타입의 선언"></a>객체 리터럴의 선언과 객체 리터럴 타입의 선언</h2><p>객체 리터럴의 hello 속성에 선언된 함수는 함수 내부의 스코프에서 다른 객체 속성에 접근하려 할 때 코드 어시스트가 동작하지 않습니다.</p>
<p><img src="/images/typescript_3_1.png" alt="windows-telnet-1"></p>
<p>인터페이스를 이용해 객체 리터럴의 타입을 추가하고 첫 번째 매개변수로 <code>this</code>를 선언하여(반드시 첫 번째 매개변수로 선언해야 한다.) 내부 참조 시에도 코드 어시스트가 동작하도록 할 수 있습니다.</p>
<p><img src="/images/typescript_3_2.png" alt="windows-telnet-2"></p>
<p>컴파일 후에는 타입들은 물론이고 첫 번째 매개변수(this)도 함께 사라집니다.</p>
<p>객체 내부 함수에서 다른 속성에 접근하려면 인터페이스를 선언한 다음에 this에 객체 리터럴의 타입을 추개해야 합니다. 만약 this에 타입을 강제해서 추가하려면 tsconfig.json의 컴파일 옵션에 <code>noImplicitThis: true</code> 속성을 추가하면 됩니다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"compilerOptions": &#123;</span><br><span class="line">  "noImplicitThis": true,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="콜백-함수의-타입-선언과-활용"><a href="#콜백-함수의-타입-선언과-활용" class="headerlink" title="콜백 함수의 타입 선언과 활용"></a>콜백 함수의 타입 선언과 활용</h2><p>콜백 함수(callback function)는 또 다른 함수의 매개변수로 전달될 수 있는 함수입니다. 이는 자바스크립트가 일급 객체이기 때문에 가능한 것 입니다. 여기서 콜백 함수를 전달받는 함수는 콜백 함수보다 상위 처리를 담당하며 <strong>고차 함수(higher-order function)</strong>라고 불립니다. 고차 함수는 하나 이상의 콜백 함수를 전달받거나 하나 이상의 함수를 결과로 반환해 주는 특성이 있습니다.</p>
<p>대표적인 콜백 함수로는 <code>setTimeout</code> 함수가 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Timer end'</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>문제!!</p>
<p>다음 예제에서 출력되는 값은 무엇일까요? 그렇게 생각한 이유는?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'hyeongyu'</span>,</span><br><span class="line">  email: <span class="string">''</span>,</span><br><span class="line"></span><br><span class="line">  setEmail: <span class="function"><span class="keyword">function</span> (<span class="params">email</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.email = email;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">email, cb</span>) </span>&#123;</span><br><span class="line">  cb(email);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">callback(<span class="string">'ahg2656@naver.com'</span>, obj.setEmail);</span><br><span class="line"><span class="built_in">console</span>.log(obj.email);</span><br><span class="line"><span class="comment">// console.log(window.email);</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Goofy</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Goofy</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://https-hyeongyuan-github-io.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
